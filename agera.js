"use strict";(()=>{async function O(t){return new Promise((e,r)=>{$.ajax({url:t.url,type:t.method,data:t.body,dataType:"jsonp",success:o=>{e(o)},error:(o,n,a)=>{r(a instanceof Error?a:new Error(a))}})})}function _(t,e){let r=t["data.name_id"];t&&r&&e?.push(["name_id",r.toString()])}function k(t){let e=document.querySelector("[data-follow-redirect]")?.getAttribute("data-follow-redirect")?.toLowerCase()!=="false";if(console.log(e?"follow true":"follow false"),!!e)if(typeof t["data.redirect_url"]=="string"){let r=new URL(t["data.redirect_url"]);window.location.href=r.href}else console.error("Invalid redirect URL provided in Profundo response.")}var L=(t,{parentKey:e=""}={})=>{let r={};return Object.keys(t).forEach(o=>{let n=t[o],a=e?`${e}.${o}`:o;typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(r,L(n,{parentKey:a})):r[a]=n}),r};function Mt(){let t=localStorage.getItem("crm_data");return t?JSON.parse(t):(localStorage.removeItem("crm_data"),{})}function q(t){let e=L(Mt());Object.keys(e).length!==0&&_(e,t)}function R(t){let e=L(t);k(e)}function Pt(t,e){switch(t.tagName.toLowerCase()){case"input":case"textarea":case"select":t.value=e;break;case"a":t.href=e;break;case"img":t.src=e;break;case"video":case"audio":case"iframe":case"source":t.src=e;break;case"meta":t.content=e;break;default:t.textContent=e}}function j(){let t=localStorage.getItem("crm_data");if(!t)return;let e=L(JSON.parse(t));document.querySelectorAll("[data-insert-crm-response]").forEach(r=>{let o=r.getAttribute("data-insert-crm-response"),n=o?e[o]:void 0;n!==void 0&&Pt(r,String(n))})}function I(t){return typeof t=="object"&&t.hasOwnProperty("count")&&typeof t.count=="number"&&t.hasOwnProperty("name")&&typeof t.name=="string"}async function U(t,e){let r={method:t.method,headers:t.headers,body:t.body},o=e?.waitForResponse?.toLowerCase()!=="false",n=Number(e?.waitForResponseDelay)||500;try{if(t.dataType==="jsonp")return await O(t);if(!o)return"keepalive"in new Request("")?await fetch(t.url,{...r,keepalive:!0}):(console.warn("Using sendBeacon..."),navigator.sendBeacon(t.url,r.body)),new Promise(i=>setTimeout(i,n));let a=await fetch(t.url,r);if(!a.ok)throw new Error(`Error fetching ${t.url}: ${a.statusText}`);return a.headers.get("Content-Type")?.includes("application/json")?await a.json():await a.text()}catch(a){console.error(a)}}var m={apiUrl:document.currentScript?.getAttribute("api-url")??atob("aHR0cHM6Ly91dGlscy1hcGkudmVyY2VsLmFwcC9hcGkv"),counterPath:"counter/",jsDelivrUrl:"https://data.jsdelivr.com/v1/packages/gh/ageraplattformen/agera.js/resolved?specifier=latest",wfSiteId:document.querySelector("html")?.dataset.wfSite??"0000",postalCodeUrl:atob("aHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L2doL2FnZXJhcGxhdHRmb3JtZW4vanMtbW9kdWxlc0BtYWluL3ppcC8=")},f={method:"POST",headers:{"Content-Type":"application/json"},critical:!0,waitForResponse:!0};async function B(t,e,r,o,n,a,s){let i=new URL("fcrm/",m.apiUrl).toString();s?.waitForResponse||(s={...s,waitForResponse:"false"});let l={method:a.toUpperCase(),headers:{"Content-Type":"application/json"},url:i,body:JSON.stringify({crm:t,...e?{client:e}:{},crm_endpoint:r["data-crm-endpoint"]||r["data-profundo-url"]||"",attributes:r,response:n?JSON.parse(n):{},body:o?{...Object.fromEntries(o)}:{},...w.size>0?{query_params:{...Object.fromEntries(w)}}:{},source:window.location.href,...S?{...S}:{}})};return U(l,s)}function N(){let t=localStorage.getItem("crm_data")||"{}",e=[...document.querySelectorAll("[data-crm-patch]"),...document.querySelectorAll("[data-profundo-client]")];if(e.length===0)return;async function r(o){let n=o.currentTarget,a=n.getAttribute("data-crm-patch")??(n.getAttribute("data-profundo-client")?"profundo":""),s=n.getAttribute("data-client")??n.getAttribute("data-profundo-client")??"",i=n.getAttribute("data-crm-patch-method")??"POST",l={};[...n.attributes].forEach(d=>{d.name.startsWith("data-")&&(l[d.name]=d.value)});let c=document.querySelector("[data-load-petition]")??n.closest("form")??null,u=c?new FormData(c):new FormData;if(!A.hasOwnProperty(a)){let d=await B(a,s,l,u,t,i,c?.dataset);d&&(localStorage.setItem("crm_data",JSON.stringify(d)),R(d));return}a==="djurensratt"&&c&&await V(c,l,t)}e.forEach(o=>{o.addEventListener("click",n=>{try{r(n).then(()=>{}).catch(a=>{console.error("Error handling patch:",a)})}catch(a){console.error("Error handling patch:",a)}}),o.style.cursor="pointer"})}function J(t,e){let r=new FormData;for(let[o,n]of new FormData(t))e.hasOwnProperty(o)?r.append(e[o],n):r.append(o,n);return r}var w=new URLSearchParams(window.location.search);function Ht(){function t(r){let o=[...w.keys()].find(n=>n.toLowerCase().includes(r));return o?w.get(o)??"":""}return{source:t("source").toLowerCase(),campaign:t("campaign").toLowerCase(),medium:t("medium").toLowerCase(),content:t("content").toLowerCase()}}var y=Ht(),g=Array.from(w,([t,e])=>`${t.toLowerCase()}: ${e.toLowerCase()}`).join(", "),S={utms:{...y.campaign?{utm_campaign:y.campaign}:{},...y.source?{utm_source:y.source}:{},...y.medium?{utm_medium:y.medium}:{},...y.content?{utm_content:y.content}:{}}};function z(t){let e=new FormData(t),r=[],o=[],n={};for(let[a,s]of e.entries())a.startsWith("tags")?r.push(s):a.startsWith("language")?o.push(s):["given-name","family-name","email","tel","postal-code","street-address","address-level2","country"].includes(a)||(n[a]=s);return{...f,url:t.getAttribute("action")??"",body:JSON.stringify({person:{given_name:e.get("given-name"),family_name:e.get("family-name"),email_addresses:[{address:e.get("email")}],phone_numbers:[{number:e.get("tel")??""}],postal_addresses:[{postal_code:e.get("postal-code")??"",address_lines:e.get("street-address")??"",region:e.get("adress-level2")??"",country:e.get("country")??""}]},add_tags:[...r],"action_network:referrer_data":{source:y.source?y.source.toString():"",website:window.location.hostname+window.location.pathname},languages_spoken:[...o],custom_fields:n})}}function W(t){let e=t?.getAttribute("data-country-code")||"";return{...f,url:new URL("amnesty/",m.apiUrl).toString(),body:JSON.stringify({form:{...Object.fromEntries(new FormData(t)),action_id:t.dataset.actionId||"9999",sign_method:t.dataset.signMethod||"agera-default"},UTM:g,site_id:m.wfSiteId,source:window.location.href,...e?{country_code:e}:{}})}}function M(t,e=!1,r,o){let n=new FormData(t),a="data-action-id",s=t.getAttribute(a)||"No ActionID Provided",i=atob("aHR0cHM6Ly9hY3QuZGp1cmVuc3JhdHQuc2UvcmVmb3JtLXNvY2lldHkvYXBpLw==");if(e){let c=JSON.parse(o||"{}"),u=!!(r&&r["data-recruit-me"]==="true");return{...f,url:i+"update",body:JSON.stringify({partId:c.partId||"",recruitMe:u,signature:{actionId:r&&r[a]||"No ActionID Provided",source:g?g:"reform-campaign"}})}}let l=!!n.get("updates");return{...f,url:i+"register",body:JSON.stringify({person:{first:n.get("given-name")||"",last:n.get("family-name")||"",email:n.get("email")||"",mobile:n.get("tel")||""},acquisition:{actionId:s?s.toString():"",source:g?g:"",marketingPermission:l}})}}async function V(t,e,r){async function o(n){try{let a=await fetch(n.url,{method:n.method,headers:n.headers,body:n.body,keepalive:!0});if(!a.ok)throw new Error(`Request failed with status ${a.status}`);await a.json()}catch(a){throw a}}await o(M(t,!0,e,r))}function P(t){let e=new FormData(t),r={};return t&&(Array.from(t.attributes).forEach(n=>{n.name.startsWith("data-")&&(r[n.name]=n.value)}),r["data-site-id"]=r["data-site-id"]||m.wfSiteId),{...f,url:new URL("fcrm/",m.apiUrl).toString(),body:JSON.stringify({crm:t?.dataset.crm??"",...t?.dataset.client?{client:t.dataset.client}:{},...t?.dataset.crmEndpoint||t?.action?{crm_endpoint:t?.dataset.crmEndpoint??t?.action}:{},body:{...Object.fromEntries(e)},...S?{...S}:{},...w.size>0?{query_params:{...Object.fromEntries(w)}}:{},source:window.location.href,...r?{attributes:{...r}}:{}})}}function Z(t){let r=J(t,{"given-name":"FNAME","family-name":"LNAME",email:"EMAIL",tel:"PHONE","street-adress":"ADDRESS","postal-code":"POSTALCODE","adress-level2":"REGION",country:"COUNTRY"}),o=t?.getAttribute("data-mailchimp-tags")||"";o!==""&&r.append("tags",o);let n=new URLSearchParams;for(let[a,s]of r.entries())(typeof s=="string"||typeof s=="number")&&n.append(a,s.toString());return n.append("UTM",g),{...f,url:t.getAttribute("action")?.replace("post?","post-json?")+"&c=?",headers:{"Content-Type":"application/x-www-form-urlencoded"},dataType:"jsonp",body:n.toString()}}function Q(t){let e=new URL(document.querySelector("html")?.dataset.wfSite??"0000","https://webflow.com/api/v1/form/"),r=new FormData(t);r.append("UTM",g);let o=new URLSearchParams({name:t?.getAttribute("name")??"form",source:window.location.href});for(let n of r.entries()){let a=`fields[${n[0]}]`;o.append(a,n[1])}return{...f,url:e.href,headers:{"Content-Type":"application/x-www-form-urlencoded"},body:o.toString()}}function G(t){return{...f,url:t.getAttribute("action")||"",body:JSON.stringify({[t.getAttribute("name")||"form"]:Object.fromEntries(new FormData(t)),source:window.location.href,time:new Date().toISOString(),UTM:g})}}var A={actionnetwork:z,amnesty:W,djurensratt:M,mailchimp:Z,webflow:Q,zapier:G,none:""};async function K(t,e,r){try{let o=e.dataset,n=await Promise.allSettled(t.map(s=>U(s,o)));n.some((s,i)=>s.status==="rejected"&&t[i].critical)?H(!1,!1,e,r):(Ot(n),H(!0,!0,e,r))}catch(o){console.error("Error in Promise.allSettled:",o),H(!1,!1,e,r)}}function Ot(t){let e=[];if(t.forEach((r,o)=>{if(r.status==="fulfilled"&&r.value!==null){let n=r.value;if(typeof r.value=="object"&&!I(n)){let a=r.value;e.push(a)}else typeof r.value=="string"&&e.push({[o.toString()]:r.value})}}),e.length>0){let r={};e.forEach(o=>{Object.assign(r,o)}),localStorage.setItem("crm_data",JSON.stringify(r)),R(r)}}function H(t,e,r,o){let n=r.parentNode,a=n?.querySelector(".w-form-done"),s=n?.querySelector(".w-form-fail");t?(a?.style.setProperty("display","block"),s?.style.setProperty("display","none"),e&&_t(r,o)):(a?.style.setProperty("display","none"),s?.style.setProperty("display","block"),o.submitButton&&(o.submitButton.value=o.submitText))}function _t(t,e){let r=t.getAttribute("redirect")??null;if(r)if(e.addUtm){let o=new URL(r,e.thisUrl),n=new URLSearchParams(window.location.search);o.searchParams.forEach((s,i)=>{n.has(i)||n.set(i,s)});let a=o.origin+o.pathname+(n.toString()?`?${n.toString()}`:"");window.location.href=a}else window.location.href=r;else t.style.display="none",console.warn("No redirect defined")}function Y(t){let e=/^data-counter(\d+)?-update$/;return Array.from(t.attributes).filter(o=>e.test(o.name)).map(o=>{let n=/\d+/.exec(o.name),a=n?n[0]:null,s=o.value,i=`data-counter${a||""}-add-amount`,l=t.querySelector(`[${i}]`),c=l?Number(l.value||l.getAttribute(i)):null;return kt(s,t,c)})}function kt(t,e,r){let o=new FormData(e);return{...f,critical:!1,url:new URL(m.counterPath+t,m.apiUrl).toString(),body:JSON.stringify({form:"default",site_id:m.wfSiteId,last_person:o.get("given-name")||"",form_url:window.location.href,...r?{add_amount:r}:{}})}}function X(t){let e={thisUrl:new URL(window.location.href),addUtm:t.dataset.redirectUtm??!0,submitButton:t.querySelector('input[type="submit"]'),submitText:t.querySelector('input[type="submit"]')?.value??""};async function r(o){o.preventDefault(),o.stopPropagation(),e.submitButton&&(e.submitButton.value=e.submitButton.dataset.wait??e.submitButton.value);let n=[],a=t.dataset.crm?.toLowerCase()??"webflow";if(a!=="none"){let s=A[a]??P;n.push(s(t)),s!==P&&n.push(...Y(t))}n.length&&await K(n,t,e)}t.addEventListener("submit",o=>{o.preventDefault(),r(o).catch(n=>console.error(n))})}function tt(){document.querySelectorAll("[data-crm]").forEach(e=>{X(e)})}var D=class{constructor(){this.cache=new Map;this.pendingRequests=new Map}async getCounter(e){if(this.cache.has(e))return this.cache.get(e);if(this.pendingRequests.has(e))return this.pendingRequests.get(e);let r=this.fetchCounter(e);this.pendingRequests.set(e,r);try{let o=await r;return this.cache.set(e,o),o}finally{this.pendingRequests.delete(e)}}async fetchCounter(e){let r=new URL(m.counterPath+e,m.apiUrl);try{let o=await fetch(r);if(!o.ok)throw new Error(`HTTP ${o.status}`);return await o.json()}catch(o){return console.error("Error fetching counter:",o),{count:0,name:e,last_person:{names:[]}}}}},et=new D;async function rt(){try{let t=await fetch(m.jsDelivrUrl);if(!t.ok)return"latest";let e=await t.json();return e?.version?`v${e.version}`:"latest"}catch(t){return console.error(t),"latest"}}function qt(){function t(i,l){return i>=l?100:Math.round(i/l*100)}function e(i){let l={350:50,500:100,2e3:250,5e3:500,2e4:2500,5e4:5e3,1e5:1e4,2e5:25e3,5e5:5e4,1e6:1e5},c=25e4,d=Object.keys(l).map(Number).find(b=>b>=i),p=d?l[d]:c;return Math.ceil(i*1.05/p)*p}function r(i,l){return i*1.05<l.target||!l.autoTarget?l.target:e(i)}function o(i,l,c){i.style.width=t(l,c)+"%"}function n(i,l,c){try{let u=new Intl.NumberFormat(c.locale,c.notation).format(l);i.textContent=u}catch{c.notation.useGrouping=!1,c.notation.notation="standard";let u=new Intl.NumberFormat(void 0,c.notation).format(l);i.textContent=u}}function a(i,l,c){l<=c.removeBelow&&(i.style.display="none"),l>=c.hideBelow&&(i.style.opacity="1")}async function s(i){let l=i.dataset.counterName||"default",c={target:parseInt(i.dataset.counterTarget||"0",10),hideBelow:parseInt(i.dataset.counterHideBelow||"0"),removeBelow:parseInt(i.dataset.counterRemoveBelow||"0"),autoTarget:!!i.dataset.counterAutoTarget||!0,locale:i.dataset.counterLocale||document.documentElement.lang||"undefined",notation:{notation:i.dataset.counterNotation?.toLowerCase()||"standard",useGrouping:!0}};async function u(h){try{if(h.toLowerCase()==="default")return 125;let x=await et.getCounter(h);return window.agera=window.agera??{},window.agera.counterValues=window.agera.counterValues??{},window.agera.counterValues[h]=x.count,x.count}catch(x){return console.error(`Error getting counter value for ${h}:`,x),0}}let d=await u(l);if(i.classList.contains("counter-current-value"))n(i,d,c),a(i,d,c);else{let h=i.querySelectorAll(".counter-current-value");for(let x of h)n(x,d,c),a(x,d,c)}let p=r(d,c),b=i.querySelectorAll(".counter-target-value");for(let h of b)n(h,p,c),a(h,d,c);let Tt=i.querySelectorAll(".counterbar-limiter");for(let h of Tt)o(h,d,p);a(i,d,c)}return{processCounterElement:s}}function ot(){let t=".counter-target-value, .counter-current-value, .counter_container { opacity: 0; transition: opacity 0.7s; }",e=document.createElement("style");e.textContent=t,document.head.appendChild(e)}async function nt(){let t=document.querySelectorAll("[data-counter-name]"),e=qt();for(let r of t)await e.processCounterElement(r)}function C(t){return JSON.parse(localStorage.getItem(t)??"{}")}function at(){let t="data-clear-localstorage",e=document.querySelector(`[${t}]`);if(!e)return;let r=e.getAttribute(t),o=e.matches("a, button"),n=()=>{r?.toLowerCase()==="true"||r?.toLowerCase()==="all"?(console.log("Clearing all local storage"),localStorage.clear()):r&&(console.log("Clearing local storage key:",r),localStorage.removeItem(r))};o?e.addEventListener("click",a=>{a.preventDefault(),n(),document.querySelectorAll("form").forEach(s=>{s.reset()}),window.location.reload()}):n()}function st(){function t(n){let a=C("forwardedform");q(Object.entries(a));function s(c){let u=Array.from(new URLSearchParams(window.location.search),([d,p])=>`${d}: ${p}`).join(", ");return c.utm=u,c}let i=s(a);function l(c){Object.entries(c).forEach(([u,d])=>{if(d){let p=document.createTextNode(d).textContent,b=`<input type="hidden" id="${u}" name="${u}" value="${p}">`;n.insertAdjacentHTML("afterbegin",b)}})}l(i)}function e(n){let a=new URLSearchParams(window.location.search),s=Array.from(a,([c,u])=>`${c}: ${u}`),i=n.getAttribute("redirect");if(i){let c=i+(i?.includes("?")?"&":"?")+a.toString();n.setAttribute("redirect",c),n.setAttribute("data-redirect",c)}window.addEventListener("beforeunload",()=>{l(n)});function l(c){if(c instanceof HTMLFormElement){let u=new FormData(c),d=s.join(", ");u.set("utm",d),localStorage.setItem("forwardedform",JSON.stringify(Object.fromEntries(u)))}}}let r=document.querySelectorAll("[data-crm]");r.length>0&&r.forEach(function(n){e(n)});let o=document.querySelectorAll('[data-load-petition="true"]');o.length>0&&o.forEach(function(n){t(n)})}function it(){let t=document.querySelector("form[data-auto-submit]");if(t&&t.getAttribute("data-auto-submit")?.toLowerCase()==="true"){if(!t.checkValidity()){console.warn("Form validation failed.");return}let e=new Event("submit",{bubbles:!0,cancelable:!0});t.dispatchEvent(e)}}function ct(){document.querySelectorAll("[data-copy]").forEach(e=>{e.addEventListener("mouseover",function(){e.style.cursor="pointer"}),e.addEventListener("click",async function(){let r="",o=e.getAttribute("data-copy")||"";if(o?.toLowerCase()==="url")r=window.location.href;else if(o?.toLowerCase()==="prev-url")r=document.referrer||"";else{let n=document.getElementById(o);n?.textContent?r=n.textContent:r=o||""}try{await navigator.clipboard.writeText(r),console.log("Copied to clipboard:",r.toString())}catch(n){console.error("Failed to copy: ",n)}})})}async function lt(){let t=document.querySelectorAll("[data-js-version]");if(t.length<1)return;let e=document.querySelector('script[src$="agera.js"]'),r="";if(e){let{src:o}=e,n=/@([^/]+)/.exec(o);if(n){let[,a]=n;r=a,r.toLowerCase().includes("latest")&&(r=await rt())}}r!==""&&t.forEach(o=>{o.innerText=r})}function ut(){document.querySelectorAll("[data-hide-if-data], [data-show-if-data]").forEach(t=>{let e=t.getAttribute("data-hide-if-data")??t.getAttribute("data-show-if-data");if(!e)return;let r=!!t.getAttribute("data-hide-if-data"),o=e?new URLSearchParams(window.location.search).get(e)??"":"",n=e&&C("forwardedform")[e]||"",a=!!(o||n);t.style.display=r===a?"none":"",r&&t.tagName==="INPUT"&&t.required&&(t.required=!1)})}function dt(){let t=document.querySelectorAll("a[href]"),e=new URLSearchParams(window.location.search);t.forEach(r=>{if(!r.href.includes("#")){let o=new URL(r.href,window.location.href);o.searchParams.forEach((a,s)=>{e.has(s)||e.append(s,a)});let n=e.toString();r.href+=`${o.search?"&":"?"}${n}${o.hash}`}})}var mt="data-insert-name";function Jt(t,e){let r="",o=["first_name","first-name","firstname","fn","first","fname","f-name","n","given_name","given-name","givenname","gn","g-n","given"];[...Object.entries(t),...Array.from(e.entries())].forEach(([a,s])=>{o.includes(a.toLowerCase())&&(r=s)});let n=document.querySelectorAll(`[${mt}]`);n.length>0&&r!==""&&zt(n,r)}function zt(t,e){let r={"no-space":e,"leading-space":"&nbsp;"+e,"trailing-space":e+"&nbsp;","double-space":"&nbsp;"+e+"&nbsp;","":"&nbsp;"+e};t.forEach(o=>{let n=o.getAttribute(mt)||"leading-space";r.hasOwnProperty(n)&&(o.innerHTML=r[n])})}function ft(){let t=C("forwardedform"),e=new URLSearchParams(window.location.search);Jt(t,e)}var F=typeof Buffer=="function",pt=typeof TextDecoder=="function"?new TextDecoder:void 0,$r=typeof TextEncoder=="function"?new TextEncoder:void 0,Zt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Qt=Array.prototype.slice.call(Zt),v=(t=>{let e={};return t.forEach((r,o)=>e[r]=o),e})(Qt),Gt=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,E=String.fromCharCode.bind(String),gt=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):t=>new Uint8Array(Array.prototype.slice.call(t,0));var ht=t=>t.replace(/[^A-Za-z0-9\+\/]/g,"");var Kt=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Yt=t=>{switch(t.length){case 4:var e=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),r=e-65536;return E((r>>>10)+55296)+E((r&1023)+56320);case 3:return E((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return E((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},Xt=t=>t.replace(Kt,Yt),te=t=>{if(t=t.replace(/\s+/g,""),!Gt.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(t.length&3));let e,r="",o,n;for(let a=0;a<t.length;)e=v[t.charAt(a++)]<<18|v[t.charAt(a++)]<<12|(o=v[t.charAt(a++)])<<6|(n=v[t.charAt(a++)]),r+=o===64?E(e>>16&255):n===64?E(e>>16&255,e>>8&255):E(e>>16&255,e>>8&255,e&255);return r},yt=typeof atob=="function"?t=>atob(ht(t)):F?t=>Buffer.from(t,"base64").toString("binary"):te,ee=F?t=>gt(Buffer.from(t,"base64")):t=>gt(yt(t).split("").map(e=>e.charCodeAt(0)));var re=F?t=>Buffer.from(t,"base64").toString("utf8"):pt?t=>pt.decode(ee(t)):t=>Xt(yt(t)),oe=t=>ht(t.replace(/[-_]/g,e=>e=="-"?"+":"/")),wt=t=>re(oe(t));function bt(){document.querySelectorAll("[data-insert-query]").forEach(e=>{let r=e.getAttribute("data-insert-query");if(r){let o=new URLSearchParams(window.location.search).get(r);o!==null&&(e instanceof HTMLInputElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement?e.value=o.toString():e.textContent=o.toString())}})}function xt(){document.querySelectorAll("[data-insert-b64-query]").forEach(e=>{let r=e.getAttribute("data-insert-b64-query");if(r){let o=wt(new URLSearchParams(window.location.search).get(r)??"");o&&(e instanceof HTMLInputElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement?e.value=o.toString():e.textContent=o.toString())}})}var T={DK:/^\d{4}$/,FI:/^(FI-|AX-)?\d{5}$/,NO:/^\d{4}$/,SE:/^(SE-)?\d{3}[ ]?\d{2}$/};function Et(){async function t(o){let n=`${m.postalCodeUrl}${o}.js`;return T.hasOwnProperty(o)||console.error("Unsupported country code"),(await import(n))[o]}async function e(o){if(!(o.getAttribute("data-postalcode-place-autofill")?.toLowerCase()==="true"))return;let a=o.querySelectorAll('[name="postal-code"]'),s=o.querySelectorAll('[name="address-level2"]'),i=o.dataset.countryCode?.toUpperCase()??"",l=Array.from(a).find(u=>u.type!=="hidden"&&u.offsetParent!==null)??a[0],c=Array.from(s).find(u=>u.type!=="hidden"&&u.offsetParent!==null)??s[0];if(!c||!l||i===""||!T.hasOwnProperty(i)){console.error("Visible postal code input, visible city output, or supported country not found");return}try{let u=await t(i),d=!1;l.addEventListener("input",()=>{let p=l.value.replaceAll(" ",""),b=T[i];p.length>3&&b.test(p)&&!d&&(c.value=u[p]||c.value)})}catch(u){console.error("Error loading postal codes:",u)}}async function r(){let o=document.querySelectorAll("[data-postalcode-place-autofill]");for(let n of o)await e(n)}r().catch(o=>{console.error("Postcode Place Autofill Error:",o)})}function Lt(){let t=new URLSearchParams(window.location.search);document.querySelectorAll("[data-redirect]").forEach(r=>{let o=r.getAttribute("data-redirect");try{if(o){let n=new URL(o,document.baseURI),a=new URL(n.toString()),s=a.searchParams;t.forEach((i,l)=>{s.has(l)||s.set(l,i)}),r.setAttribute("data-redirect",a.toString())}}catch(n){console.error("An error occurred:",n)}})}function St(){Object.entries({"[data-share-whatsapp-text]":e=>`https://wa.me/?text=${encodeURIComponent(e)}`,"[data-share-facebook-url]":e=>`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(e)}`,"[data-share-linkedin-url]":e=>`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(e)}`,"[data-share-twitter-text]":e=>`https://twitter.com/intent/tweet?text=${encodeURIComponent(e)}`,"[data-share-email-subject], [data-share-email-body]":(e,r)=>`mailto:?subject=${encodeURIComponent(e)}&body=${encodeURIComponent(r)}`}).forEach(([e,r])=>{document.querySelectorAll(e).forEach(o=>{o.addEventListener("click",n=>{n.preventDefault();let a=e.includes("email"),s=o.getAttribute(a?"data-share-email-subject":e.slice(1,-1))??"",i=a?o.getAttribute("data-share-email-body")??"":"",l=r(s,i);window.open(l,a?"_self":"_blank")})})})}function Ct(){let t=document.querySelectorAll("*"),e=[],r=!0;if(t.forEach(o=>{let{attributes:n}=o;for(let a=0;a<n.length;a++){let s=n[a];s.name.startsWith("data-splitter-url")?e.push(s.value):s.name==="data-splitter-keep-query"&&s.value==="false"&&(r=!1)}}),e.length){let o=e[Math.floor(Math.random()*e.length)],n=window.location,a=r?new URL(o,n.origin).href+n.search:o;window.location.href=a}}function Rt(){let t=[document.documentElement.lang||"en","en"];document.querySelectorAll("[data-insert-time]").forEach(o=>{o.innerText=le(o,t)}),document.querySelectorAll("[data-remaining-days-to]").forEach(o=>{o.innerText=ue(o,t)})}function le(t,e){let r=new Date,o=t.getAttribute("data-insert-time"),n="";if(o?.toLowerCase()==="year")n=r.getFullYear().toString();else if(o?.toLowerCase()==="month")n=(r.getMonth()+1).toString();else if(o?.toLowerCase()==="day")n=r.getDate().toString();else if(o?.toLowerCase()==="date")n=r.toLocaleDateString(e);else if(o?.toLowerCase()==="datetime")n=r.toLocaleString(e);else if(o?.toLowerCase()==="time")n=r.toLocaleTimeString(e);else return"";return n}function ue(t,e){let r=new Date,o=t.getAttribute("data-remaining-days-to");try{if(o){let n=new Date(o),a=Math.round((n.getTime()-r.getTime())/(1e3*60*60*24));return new Intl.RelativeTimeFormat(e,{numeric:"auto"}).format(a,"day")}}catch(n){console.error("remainingDays error:",n)}return""}function Ut(){{let t=`.cloak { 
			opacity: 0;
			height: 0px;
      overflow: hidden;
			margin: 0;
      padding-top: 0;
      padding-bottom: 0;
		}`,e=document.createElement("style");e.textContent=t,document.head.appendChild(e)}}function At(){function t(){let a=window.location.pathname.split("/").filter(i=>i.length===2),s=a.length>0?a[0]:"";return s!==""?"/"+s:s}function e(n){try{return new URL(n),!0}catch{return!1}}function r(n,a){if(n===null)return"";if(e(n)){let s=new URL(n);return s.pathname=a+s.pathname,s.toString()}return a+n}let o=document.querySelectorAll('[data-linguana-redirect="true"]');for(let n of o)n.getAttribute("redirect")&&n.setAttribute("redirect",r(n.getAttribute("redirect"),t())),n.getAttribute("data-redirect")&&n.setAttribute("data-redirect",r(n.getAttribute("data-redirect"),t()))}async function vt(){dt(),at(),ct(),await lt(),xt(),ft(),bt(),Lt(),Ct(),Rt(),St(),it(),Et(),ut(),j()}function fe(){ot(),Ut();async function t(){At(),st(),await nt(),tt(),N(),await vt()}document.addEventListener("DOMContentLoaded",async()=>{try{await t()}catch(e){console.error("Error during DOMContentLoaded:",e)}})}window.agera||(document.currentScript&&"src"in document.currentScript&&document.currentScript.src.includes("localhost:")?(console.log("agera.js dev mode".toUpperCase()),console.log("API URL:",m.apiUrl),window.agera={dev:!0}):window.agera={},fe());})();
