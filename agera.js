(function(){"use strict";async function N(t){return new Promise((e,n)=>{$.ajax({url:t.url,type:t.method,data:t.body,dataType:"jsonp",success:r=>{e(r)},error:(r,o,a)=>{n(a instanceof Error?a:new Error(a))}})})}function B(t,e){const n=t["data.name_id"];t&&n&&e?.push(["name_id",n.toString()])}function H(t){if(document.querySelector("[data-follow-redirect]")?.getAttribute("data-follow-redirect")?.toLowerCase()?.trim()==="true")try{const n=t["data.redirect_url"];n&&typeof n=="string"&&(window.location.href=new URL(n).href)}catch(n){console.error("Invalid redirect URL:",n)}}const C=(t,{parentKey:e=""}={})=>{const n={};return Object.keys(t).forEach(r=>{const o=t[r],a=e?`${e}.${r}`:r;typeof o=="object"&&o!==null&&!Array.isArray(o)?Object.assign(n,C(o,{parentKey:a})):n[a]=o}),n};function V(){const t=localStorage.getItem("crm_data");return t?JSON.parse(t):(localStorage.removeItem("crm_data"),{})}function J(t){const e=C(V());Object.keys(e).length!==0&&B(e,t)}function x(t){const e=C(t);H(e)}function W(t,e){switch(t.tagName.toLowerCase()){case"input":case"textarea":case"select":t.value=e;break;case"a":t.href=e;break;case"img":t.src=e;break;case"video":case"audio":case"iframe":case"source":t.src=e;break;case"meta":t.content=e;break;default:t.textContent=e}}function z(){const t=localStorage.getItem("crm_data");if(!t)return;const e=C(JSON.parse(t));document.querySelectorAll("[data-insert-crm-response]").forEach(n=>{const r=n.getAttribute("data-insert-crm-response"),o=r?e[r]:void 0;o!==void 0&&W(n,String(o))})}function G(t){return typeof t=="object"&&t.hasOwnProperty("count")&&typeof t.count=="number"&&t.hasOwnProperty("name")&&typeof t.name=="string"}const m={apiUrl:document.querySelector("[agera-api-url]")?.getAttribute("agera-api-url")??atob("aHR0cHM6Ly91dGlscy1hcGkudmVyY2VsLmFwcC9hcGkv"),counterPath:"counter/",jsDelivrUrl:"https://data.jsdelivr.com/v1/packages/gh/ageraplattformen/agera.js/resolved?specifier=latest",wfSiteId:document.querySelector("html")?.dataset.wfSite??"0000",postalCodeUrl:atob("aHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L2doL2FnZXJhcGxhdHRmb3JtZW4vanMtbW9kdWxlc0BtYWluL3ppcC8=")},g={method:"POST",headers:{"Content-Type":"application/json"},critical:!0,waitForResponse:!0};function Z(t){const e=new FormData(t),n=[],r=[],o={};for(const[s,c]of e.entries())s.startsWith("tags")?n.push(c):s.startsWith("language")?r.push(c):["given-name","family-name","email","tel","postal-code","street-address","address-level2","country"].includes(s)||(o[s]=c);const a=t.getAttribute("action")||t.getAttribute("data-crm-endpoint")||"";return{...g,url:a??"",body:JSON.stringify({person:{given_name:e.get("given-name"),family_name:e.get("family-name"),email_addresses:[{address:e.get("email"),status:"subscribed"}],phone_numbers:[{number:e.get("tel")??"",status:"subscribed"}],postal_addresses:[{postal_code:e.get("postal-code")??"",address_lines:e.get("street-address")??"",region:e.get("adress-level2")??"",country:e.get("country")??""}]},add_tags:[...n],"action_network:referrer_data":{source:f.source?f.source.toString():"",website:window.location.hostname+window.location.pathname},languages_spoken:[...r],custom_fields:o})}}function K(t){const e=t?.getAttribute("data-country-code")||"";return{...g,url:new URL("amnesty/",m.apiUrl).toString(),body:JSON.stringify({form:{...Object.fromEntries(new FormData(t)),action_id:t.dataset.actionId||"9999",sign_method:t.dataset.signMethod||"agera-default"},UTM:w,site_id:m.wfSiteId,source:window.location.href,...e?{country_code:e}:{}})}}function D(t,e=!1,n,r){const o=new FormData(t),a="data-action-id",s=t.getAttribute(a)||"No ActionID Provided",c=atob("aHR0cHM6Ly9hY3QuZGp1cmVuc3JhdHQuc2UvcmVmb3JtLXNvY2lldHkvYXBpLw==");if(e){const i=JSON.parse(r||"{}"),l=!!(n&&n["data-recruit-me"]==="true");return{...g,url:c+"update",body:JSON.stringify({partId:i.partId||"",recruitMe:l,signature:{actionId:n&&n[a]||"No ActionID Provided",source:w||"reform-campaign"}})}}const u=!!o.get("updates");return{...g,url:c+"register",body:JSON.stringify({person:{first:o.get("given-name")||"",last:o.get("family-name")||"",email:o.get("email")||"",mobile:o.get("tel")||""},acquisition:{actionId:s.toString(),source:w||"",marketingPermission:u}})}}async function Y(t,e,n){async function r(o){try{const a=await fetch(o.url,{method:o.method,headers:o.headers,body:o.body,keepalive:!0});if(!a.ok)throw new Error(`Request failed with status ${a.status}`);await a.json()}catch(a){throw a}}await r(D(t,!0,e,n))}function Q(t){const n=ot(t,{"given-name":"FNAME","family-name":"LNAME",email:"EMAIL",tel:"PHONE","street-adress":"ADDRESS","postal-code":"POSTALCODE","adress-level2":"REGION",country:"COUNTRY"}),r=t?.getAttribute("data-mailchimp-tags")||"";r!==""&&n.append("tags",r);const o=new URLSearchParams;for(const[a,s]of n.entries())(typeof s=="string"||typeof s=="number")&&o.append(a,s.toString());return o.append("UTM",w),{...g,url:t.getAttribute("action")?.replace("post?","post-json?")+"&c=?",headers:{"Content-Type":"application/x-www-form-urlencoded"},dataType:"jsonp",body:o.toString()}}function X(t){const e=new URL(document.querySelector("html")?.dataset.wfSite??"0000","https://webflow.com/api/v1/form/"),n=new FormData(t);n.append("UTM",w);const r=new URLSearchParams({name:t?.getAttribute("name")??"form",source:window.location.href});for(const o of n.entries()){const a=`fields[${o[0]}]`;r.append(a,o[1])}return{...g,url:e.href,headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r.toString()}}function tt(t){return{...g,url:t.getAttribute("action")||"",body:JSON.stringify({[t.getAttribute("name")||"form"]:Object.fromEntries(new FormData(t)),source:window.location.href,time:new Date().toISOString(),UTM:w})}}function et(t){return{...g,url:"",critical:!1,dummy:!0}}const T={actionnetwork:Z,amnesty:K,djurensratt:D,mailchimp:Q,webflow:X,zapier:tt,none:et};async function O(t,e){const n={method:t.method,headers:{...t.headers,...t.url.includes(m.apiUrl)&&{"x-source":window.location.href}},body:t.body},r=e?.waitForResponse?.toLowerCase()!=="false",o=Number(e?.waitForResponseDelay)||100;try{if(t.dataType==="jsonp")return await N(t);if(!r)return"keepalive"in new Request("")?(console.warn("not waiting for response, using keepalive..."),fetch(t.url,{...n,keepalive:!0})):(console.warn("Using sendBeacon..."),navigator.sendBeacon(t.url,n.body)),new Promise(c=>setTimeout(c,o));const a=await fetch(t.url,n);if(!a.ok)throw new Error(`Error fetching ${t.url}: ${a.statusText}`);return a.headers.get("Content-Type")?.includes("application/json")?await a.json():await a.text()}catch(a){throw new Error(`Error fetching ${t.url}: ${String(a)}`)}}async function nt(t,e,n,r,o,a,s){const c=new URL("fcrm/",m.apiUrl).toString();s?.waitForResponse||(s={...s,waitForResponse:"false"});const u=n["data-crm-endpoint"]||n["data-profundo-url"],i={method:a.toUpperCase(),headers:{"Content-Type":"application/json"},url:c,body:JSON.stringify({crm:t,...e?{client:e}:{},...u?{crm_endpoint:u}:{},attributes:n,response:JSON.parse(o),body:r?{...Object.fromEntries(r)}:{},...y.size>0?{query_params:{...Object.fromEntries(y)}}:{},source:window.location.href,...E?{...E}:{}})};return O(i,s)}function rt(){const t=localStorage.getItem("crm_data")||"{}",e=[...document.querySelectorAll("[data-crm-patch]"),...document.querySelectorAll("[data-profundo-client]")];if(e.length===0)return;async function n(r){const o=r.currentTarget,a=o.getAttribute("data-crm-patch")??(o.getAttribute("data-profundo-client")?"profundo":""),s=o.getAttribute("data-client")??o.getAttribute("data-profundo-client")??"";let c=o.getAttribute("data-crm-patch-method")??"POST";a==="unhcrse"&&(c="PATCH");const u={};[...o.attributes].forEach(d=>{d.name.startsWith("data-")&&(u[d.name]=d.value)});const i=document.querySelector("[data-load-petition]")??o.closest("form")??null,l=i?new FormData(i):new FormData;if(!T.hasOwnProperty(a)){const d=await nt(a,s,u,l,t,c,i?.dataset);d&&(localStorage.setItem("crm_data",JSON.stringify(d)),x(d));return}a==="djurensratt"&&i&&await Y(i,u,t)}e.forEach(r=>{r.addEventListener("click",o=>{try{n(o).then(()=>{}).catch(a=>{console.error("Error handling patch:",a)})}catch(a){console.error("Error handling patch:",a)}}),r.style.cursor="pointer"})}function ot(t,e){const n=new FormData;for(const[r,o]of new FormData(t))e.hasOwnProperty(r)?n.append(e[r],o):n.append(r,o);return n}const y=new URLSearchParams(window.location.search);function at(){function t(n){const r=[...y.keys()].find(o=>o.toLowerCase().includes(n));return r?y.get(r)??"":""}return{source:t("source").toLowerCase(),campaign:t("campaign").toLowerCase(),medium:t("medium").toLowerCase(),content:t("content").toLowerCase(),term:t("term").toLowerCase(),wec:t("wec").toLowerCase()}}const f=at(),w=Array.from(y,([t,e])=>`${t.toLowerCase()}: ${e.toLowerCase()}`).join(", "),E={utms:{...f.campaign?{utm_campaign:f.campaign}:{},...f.source?{utm_source:f.source}:{},...f.medium?{utm_medium:f.medium}:{},...f.content?{utm_content:f.content}:{},...f.term?{utm_term:f.term}:{},...f.wec?{utm_wec:f.wec}:{}}};function j(t){const e=new FormData(t),n={};return t&&(Array.from(t.attributes).forEach(o=>{o.name.startsWith("data-")&&(n[o.name]=o.value)}),n["data-site-id"]=n["data-site-id"]||m.wfSiteId),{...g,url:new URL("fcrm/",m.apiUrl).toString(),body:JSON.stringify({crm:t?.dataset.crm??"",...t?.dataset.client?{client:t.dataset.client}:{},...t?.dataset.crmEndpoint||t?.action&&!t.action.includes(window.location.host)?{crm_endpoint:t?.dataset.crmEndpoint??t?.action}:{},body:{...Object.fromEntries(e)},...E?{...E}:{},...y.size>0?{query_params:{...Object.fromEntries(y)}}:{},source:window.location.href,...n?{attributes:{...n}}:{}})}}async function st(t,e,n){try{const r=await Promise.allSettled(t.map(a=>a.dummy?Promise.resolve({success:!0}):O(a,e.dataset)));r.some((a,s)=>a.status==="rejected"&&t[s].critical)?L(!1,!1,e,n):(ct(r),L(!0,!0,e,n))}catch(r){console.error("Error in Promise.allSettled:",r),L(!1,!1,e,n)}}function ct(t){const e=[];if(t.forEach((n,r)=>{if(n.status==="fulfilled"&&n.value!==null){const o=n.value;if(typeof n.value=="object"&&!G(o)){const a=n.value;e.push(a)}else typeof n.value=="string"&&e.push({[r.toString()]:n.value})}}),e.length>0){const n={};e.forEach(r=>{Object.assign(n,r)}),localStorage.setItem("crm_data",JSON.stringify(n)),x(n)}}function L(t,e,n,r){const o=n.parentNode?.querySelector(".w-form-done"),a=n.parentNode?.querySelector(".w-form-fail"),s=n.dataset?.showSuccess?.toLowerCase()!=="false";t?(s&&(o?.style.setProperty("display","block"),n.style.display="none"),e&&it(n,r)):(o?.style.setProperty("display","none"),a?.style.setProperty("display","block"),r.submitButton&&(r.submitButton.value=r.submitText))}function it(t,e){const n=t.getAttribute("redirect")??null;if(n)if(e.addUtm){const r=new URL(n,e.thisUrl),o=new URLSearchParams(window.location.search);r.searchParams.forEach((s,c)=>{o.has(c)||o.set(c,s)});const a=r.origin+r.pathname+(o.toString()?`?${o.toString()}`:"");window.location.href=a}else window.location.href=n;else e.submitButton&&(e.submitButton.value=e.submitButton.dataset.successText||e.submitText),console.warn("No redirect defined")}function ut(t){const e=/^data-counter(\d+)?-update$/;return Array.from(t.attributes).filter(r=>e.test(r.name)).map(r=>{const o=/\d+/.exec(r.name),a=o?o[0]:null,s=r.value,c=`data-counter${a||""}-add-amount`,u=t.querySelector(`[${c}]`),i=u?Number(u.value||u.getAttribute(c)):null;return lt(s,t,i)})}function lt(t,e,n){const r=new FormData(e);return{...g,critical:!1,url:new URL(m.counterPath+t,m.apiUrl).toString(),body:JSON.stringify({form:"default",site_id:m.wfSiteId,last_person:r.get("given-name")||"",form_url:window.location.href,...n?{add_amount:n}:{}})}}function dt(t){const e={thisUrl:new URL(window.location.href),addUtm:t.dataset.redirectUtm??!0,submitButton:t.querySelector('input[type="submit"]'),submitText:t.querySelector('input[type="submit"]')?.value??""};async function n(r){r.preventDefault(),r.stopPropagation(),e.submitButton&&(e.submitButton.value=e.submitButton.dataset.wait??e.submitButton.value);const o=[],a=t.dataset.crm?.toLowerCase()??"webflow",s=T[a]??j;o.push(s(t)),s!==j&&o.push(...ut(t)),o.length&&await st(o,t,e)}t.addEventListener("submit",r=>{r.preventDefault(),n(r).catch(o=>console.error(o))})}function ft(){document.querySelectorAll("[data-crm]").forEach(e=>{dt(e)})}class mt{constructor(){this.cache=new Map,this.pendingRequests=new Map}async getCounter(e){if(this.cache.has(e))return this.cache.get(e);if(this.pendingRequests.has(e))return this.pendingRequests.get(e);const n=this.fetchCounter(e);this.pendingRequests.set(e,n);try{const r=await n;return this.cache.set(e,r),r}finally{this.pendingRequests.delete(e)}}async fetchCounter(e){const n=new URL(m.counterPath+e,m.apiUrl);try{const r=await fetch(n,{headers:{"x-source":window.location.href}});if(!r.ok)throw new Error(`HTTP ${r.status}`);return await r.json()}catch(r){return console.error("Error fetching counter:",r),{count:0,name:e,last_person:{names:[]}}}}}const pt=new mt;async function ht(){try{const t=await fetch(m.jsDelivrUrl);if(!t.ok)return"latest";const e=await t.json();return e?.version?`v${e.version}`:"latest"}catch(t){return console.error(t),"latest"}}function gt(){function t(c,u){return c>=u?100:Math.round(c/u*100)}function e(c){const u={350:50,500:100,2e3:250,5e3:500,2e4:2500,5e4:5e3,1e5:1e4,2e5:25e3,5e5:5e4,1e6:1e5},i=25e4,d=Object.keys(u).map(Number).find(S=>S>=c),p=d?u[d]:i;return Math.ceil(c*1.05/p)*p}function n(c,u){return c*1.05<u.target?u.target:e(c)}function r(c,u,i){c.style.width=t(u,i)+"%"}function o(c,u,i){try{const l=new Intl.NumberFormat(i.locale,i.notation).format(u);c.textContent=l}catch{i.notation.useGrouping=!1,i.notation.notation="standard";const l=new Intl.NumberFormat(void 0,i.notation).format(u);c.textContent=l}}function a(c,u,i){u<=i.removeBelow&&(c.style.display="none"),u>=i.hideBelow&&(c.style.opacity="1")}async function s(c){const u=c.dataset.counterName||"default",i={target:parseInt(c.dataset.counterTarget||"0",10),hideBelow:parseInt(c.dataset.counterHideBelow||"0"),removeBelow:parseInt(c.dataset.counterRemoveBelow||"0"),autoTarget:!!c.dataset.counterAutoTarget||!0,locale:c.dataset.counterLocale||document.documentElement.lang||"undefined",notation:{notation:c.dataset.counterNotation?.toLowerCase()||"standard",useGrouping:!0}};async function l(h){try{if(h.toLowerCase()==="default")return 125;const A=await pt.getCounter(h);return window.agera=window.agera??{},window.agera.counterValues=window.agera.counterValues??{},window.agera.counterValues[h]=A.count,A.count}catch(A){return console.error(`Error getting counter value for ${h}:`,A),0}}const d=await l(u);if(c.classList.contains("counter-current-value"))o(c,d,i),a(c,d,i);else{const h=c.querySelectorAll(".counter-current-value");for(const A of h)o(A,d,i),a(A,d,i)}const p=n(d,i),S=c.querySelectorAll(".counter-target-value");for(const h of S)o(h,p,i),a(h,d,i);const Qt=c.querySelectorAll(".counterbar-limiter");for(const h of Qt)r(h,d,p);a(c,d,i)}return{processCounterElement:s}}function wt(){const t=".counter-target-value, .counter-current-value, .counter_container { opacity: 0; transition: opacity 0.7s; }",e=document.createElement("style");e.textContent=t,document.head.appendChild(e)}async function yt(){const t=document.querySelectorAll("[data-counter-name]"),e=gt();for(const n of t)await e.processCounterElement(n)}function U(t){return JSON.parse(localStorage.getItem(t)??"{}")}function bt(){const t="data-clear-localstorage",e=document.querySelector(`[${t}]`);if(!e)return;const n=e.getAttribute(t),r=e.matches("a, button"),o=()=>{n?.toLowerCase()==="true"||n?.toLowerCase()==="all"?(console.log("Clearing all local storage"),localStorage.clear()):n&&(console.log("Clearing local storage key:",n),localStorage.removeItem(n))};r?e.addEventListener("click",a=>{a.preventDefault(),o(),document.querySelectorAll("form").forEach(s=>{s.reset()}),window.location.reload()}):o()}function St(){function t(o){const a=U("forwardedform");J(Object.entries(a));function s(i){const l=Array.from(new URLSearchParams(window.location.search),([d,p])=>`${d}: ${p}`).join(", ");return i.utm=l,i}const c=s(a);function u(i){Object.entries(i).forEach(([l,d])=>{if(d){const p=document.createTextNode(d).textContent,S=`<input type="hidden" id="${l}" name="${l}" value="${p}">`;o.insertAdjacentHTML("afterbegin",S)}})}u(c)}function e(o){const a=new URLSearchParams(window.location.search),s=Array.from(a,([i,l])=>`${i}: ${l}`),c=o.getAttribute("redirect");if(c){const i=c+(c?.includes("?")?"&":"?")+a.toString();o.setAttribute("redirect",i),o.setAttribute("data-redirect",i)}window.addEventListener("beforeunload",()=>{u(o)});function u(i){if(i instanceof HTMLFormElement){const l=new FormData(i),d=s.join(", ");l.set("utm",d),localStorage.setItem("forwardedform",JSON.stringify(Object.fromEntries(l)))}}}const n=document.querySelectorAll("[data-crm]");n.length>0&&n.forEach(function(o){e(o)});const r=document.querySelectorAll('[data-load-petition="true"]');r.length>0&&r.forEach(function(o){t(o)})}function At(){const t=document.querySelector("form[data-auto-submit]");if(t&&t.getAttribute("data-auto-submit")?.toLowerCase()==="true"){if(!t.checkValidity()){console.warn("Form validation failed.");return}const e=new Event("submit",{bubbles:!0,cancelable:!0});t.dispatchEvent(e)}}function Ct(){document.querySelectorAll("[data-copy]").forEach(e=>{e.addEventListener("mouseover",function(){e.style.cursor="pointer"}),e.addEventListener("click",async function(){let n="";const r=e.getAttribute("data-copy");if(r?.toLowerCase()==="url")n=window.location.href;else if(r?.toLowerCase()==="prev-url")n=document.referrer||"";else{const o=document.getElementById(r);o?.textContent?n=o.textContent:n=r||""}try{await navigator.clipboard.writeText(n),console.log("Copied to clipboard:",n.toString())}catch(o){console.error("Failed to copy: ",o)}})})}async function Et(){const t=document.querySelectorAll("[data-js-version]");if(t.length<1)return;const e=document.querySelector('script[src$="agera.js"]');let n="";if(e){const{src:r}=e,o=/@([^/]+)/.exec(r);if(o){const[,a]=o;n=a,n.toLowerCase().includes("latest")&&(n=await ht())}}n!==""&&t.forEach(r=>{r.innerText=n})}function vt(){document.querySelectorAll("[data-hide-if-data], [data-show-if-data]").forEach(t=>{const e=t.getAttribute("data-hide-if-data")??t.getAttribute("data-show-if-data");if(!e)return;const n=!!t.getAttribute("data-hide-if-data"),r=e?new URLSearchParams(window.location.search).get(e)??"":"",o=e&&U("forwardedform")[e]||"",a=!!(r||o);t.style.display=n===a?"none":"",t.style.display=="none"&&t.getAttribute("name")&&t.setAttribute("name",t.getAttribute("name")+"-hidden"),n&&t.tagName==="INPUT"&&t.required&&(t.required=!1)})}function Lt(){const t=document.querySelectorAll("a[href]"),e=new URLSearchParams(window.location.search);t.forEach(n=>{if(!n.href.includes("#")){const r=new URL(n.href,window.location.href);r.searchParams.forEach((a,s)=>{e.has(s)||e.append(s,a)});const o=e.toString();n.href+=`${r.search?"&":"?"}${o}${r.hash}`}})}const q="data-insert-name";function Ut(t,e){let n="";const r=["first_name","first-name","firstname","fn","first","fname","f-name","n","given_name","given-name","givenname","gn","g-n","given"];[...Object.entries(t),...Array.from(e.entries())].forEach(([a,s])=>{r.includes(a.toLowerCase())&&(n=s)});const o=document.querySelectorAll(`[${q}]`);o.length>0&&n!==""&&Rt(o,n)}function Rt(t,e){const n={"no-space":e,"leading-space":"&nbsp;"+e,"trailing-space":e+"&nbsp;","double-space":"&nbsp;"+e+"&nbsp;","":"&nbsp;"+e};t.forEach(r=>{const o=r.getAttribute(q)||"leading-space";n.hasOwnProperty(o)&&(r.innerHTML=n[o])})}function Pt(){const t=U("forwardedform"),e=new URLSearchParams(window.location.search);Ut(t,e)}const R=typeof Buffer=="function",F=typeof TextDecoder=="function"?new TextDecoder:void 0;typeof TextEncoder=="function"&&new TextEncoder;const xt=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),v=(t=>{let e={};return t.forEach((n,r)=>e[n]=r),e})(xt),Dt=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,b=String.fromCharCode.bind(String),_=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):t=>new Uint8Array(Array.prototype.slice.call(t,0)),k=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),Tt=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Ot=t=>{switch(t.length){case 4:var e=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),n=e-65536;return b((n>>>10)+55296)+b((n&1023)+56320);case 3:return b((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return b((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},jt=t=>t.replace(Tt,Ot),I=typeof atob=="function"?t=>atob(k(t)):R?t=>Buffer.from(t,"base64").toString("binary"):t=>{if(t=t.replace(/\s+/g,""),!Dt.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(t.length&3));let e,n="",r,o;for(let a=0;a<t.length;)e=v[t.charAt(a++)]<<18|v[t.charAt(a++)]<<12|(r=v[t.charAt(a++)])<<6|(o=v[t.charAt(a++)]),n+=r===64?b(e>>16&255):o===64?b(e>>16&255,e>>8&255):b(e>>16&255,e>>8&255,e&255);return n},qt=R?t=>_(Buffer.from(t,"base64")):t=>_(I(t).split("").map(e=>e.charCodeAt(0))),Ft=R?t=>Buffer.from(t,"base64").toString("utf8"):F?t=>F.decode(qt(t)):t=>jt(I(t)),_t=t=>k(t.replace(/[-_]/g,e=>e=="-"?"+":"/")),kt=t=>Ft(_t(t));function It(){document.querySelectorAll("[data-insert-query]").forEach(e=>{const n=e.getAttribute("data-insert-query");if(n){const r=new URLSearchParams(window.location.search).get(n);r!==null&&(e instanceof HTMLInputElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement?e.value=r.toString():e.textContent=r.toString())}})}function $t(){document.querySelectorAll("[data-insert-b64-query]").forEach(e=>{const n=e.getAttribute("data-insert-b64-query");if(n){const r=kt(new URLSearchParams(window.location.search).get(n)??"");r&&(e instanceof HTMLInputElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement?e.value=r.toString():e.textContent=r.toString())}})}const P={DK:/^\d{4}$/,FI:/^(FI-|AX-)?\d{5}$/,NO:/^\d{4}$/,SE:/^(SE-)?\d{3}[ ]?\d{2}$/};function Mt(){async function t(r){const o=`${m.postalCodeUrl}${r}.js`;return(!P.hasOwnProperty(r)||!o)&&console.error("Unsupported country code"),(await import(o))[r]}async function e(r){if(!(r.getAttribute("data-postalcode-place-autofill")?.toLowerCase()==="true"))return;const a=r.querySelectorAll('[name="postal-code"]'),s=r.querySelectorAll('[name="address-level2"]'),c=r.dataset.countryCode?.toUpperCase()??"",u=Array.from(a).find(l=>l.type!=="hidden"&&l.offsetParent!==null)??a[0],i=Array.from(s).find(l=>l.type!=="hidden"&&l.offsetParent!==null)??s[0];if(!i||!u||c===""||!P.hasOwnProperty(c)){console.error("Visible postal code input, visible city output, or supported country not found");return}try{const l=await t(c),d=!1;u.addEventListener("input",()=>{const p=u.value.replaceAll(" ",""),S=P[c];p.length>3&&S.test(p)&&!d&&(i.value=l[p]||i.value)})}catch(l){console.error("Error loading postal codes:",l)}}async function n(){const r=document.querySelectorAll("[data-postalcode-place-autofill]");for(const o of r)await e(o)}n().catch(r=>{console.error("Postcode Place Autofill Error:",r)})}function Nt(){const t=new URLSearchParams(window.location.search);document.querySelectorAll("[data-redirect]").forEach(n=>{const r=n.getAttribute("data-redirect");try{if(r){const o=new URL(r,document.baseURI),a=new URL(o.toString()),s=a.searchParams;t.forEach((c,u)=>{s.has(u)||s.set(u,c)}),n.setAttribute("data-redirect",a.toString())}}catch(o){console.error("An error occurred:",o)}})}function Bt(){Object.entries({"[data-share-whatsapp-text]":e=>`https://wa.me/?text=${encodeURIComponent(e)}`,"[data-share-facebook-url]":e=>`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(e)}`,"[data-share-linkedin-url]":e=>`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(e)}`,"[data-share-twitter-text]":e=>`https://twitter.com/intent/tweet?text=${encodeURIComponent(e)}`,"[data-share-email-subject], [data-share-email-body]":(e,n)=>`mailto:?subject=${encodeURIComponent(e)}&body=${encodeURIComponent(n)}`}).forEach(([e,n])=>{document.querySelectorAll(e).forEach(r=>{r.addEventListener("click",o=>{o.preventDefault();const a=e.includes("email"),s=r.getAttribute(a?"data-share-email-subject":e.slice(1,-1))??"",c=a?r.getAttribute("data-share-email-body")??"":"",u=n(s,c);window.open(u,a?"_self":"_blank")})})})}function Ht(){const t=document.querySelectorAll("*"),e=[];let n=!0,r="";if(t.forEach(o=>{const{attributes:a}=o;Array.from(a).forEach(s=>{s.name.startsWith("data-splitter-url")?e.push(s.value):s.name==="data-splitter-keep-query"&&s.value==="false"?n=!1:s.name==="data-splitter-append-query"&&(r=s.value)})}),e.length){const o=e[Math.floor(Math.random()*e.length)],a=window.location,s=new URL(o,a.origin);n&&a.search&&new URLSearchParams(a.search).forEach((u,i)=>{s.searchParams.append(i,u)}),r&&new URLSearchParams(r).forEach((u,i)=>{if(s.searchParams.has(i)){const l=s.searchParams.get(i);s.searchParams.set(i,`${l}${u}`)}else s.searchParams.set(i,u)}),window.location.href=s.href}}function Vt(){const t=[document.documentElement.lang||"en","en"];document.querySelectorAll("[data-insert-time]").forEach(r=>{r.innerText=Jt(r,t)}),document.querySelectorAll("[data-remaining-days-to]").forEach(r=>{r.innerText=Wt(r,t)})}function Jt(t,e){const n=new Date,r=t.getAttribute("data-insert-time");let o="";if(r?.toLowerCase()==="year")o=n.getFullYear().toString();else if(r?.toLowerCase()==="month")o=(n.getMonth()+1).toString();else if(r?.toLowerCase()==="day")o=n.getDate().toString();else if(r?.toLowerCase()==="date")o=n.toLocaleDateString(e);else if(r?.toLowerCase()==="datetime")o=n.toLocaleString(e);else if(r?.toLowerCase()==="time")o=n.toLocaleTimeString(e);else return"";return o}function Wt(t,e){const n=new Date,r=t.getAttribute("data-remaining-days-to");try{if(r){const o=new Date(r),a=Math.round((o.getTime()-n.getTime())/(1e3*60*60*24));return new Intl.RelativeTimeFormat(e,{numeric:"auto"}).format(a,"day")}}catch(o){console.error("remainingDays error:",o)}return""}const M={"family-name":{pattern:"^(?=.*\\p{L})[\\p{L}\\p{M}\\s'\\-.,]{1,80}$",autocomplete:"family-name"},"given-name":{pattern:"^(?=.*\\p{L})[\\p{L}\\p{M}\\s'\\-.,]{1,40}$",autocomplete:"given-name"},email:{pattern:"^[^@]+@[^@]+\\.[^@\\s]+(\\.[^@\\s]+)*$",autocomplete:"email"},"work-email":{pattern:"^[^@]+@[^@]+\\.[^@\\s]+(\\.[^@\\s]+)*$"}};function zt(t=Object.keys(M),e={}){const n={...M,...e};t.forEach(r=>{document.querySelectorAll(`input[name="${r}"]`).forEach(a=>{a.getAttribute("data-validate-input")==="false"||a.type==="hidden"||n[r]&&(a.pattern||(a.pattern=n[r].pattern),n[r].autocomplete&&!a.getAttribute("autocomplete")&&a.setAttribute("autocomplete",n[r].autocomplete))})})}function Gt(){{const t=".cloak {opacity: 0;height: 0;overflow: hidden;margin: 0;padding-top: 0;padding-bottom: 0;}",e=document.createElement("style");e.textContent=t,document.head.appendChild(e)}}function Zt(){function t(){const a=window.location.pathname.split("/").filter(c=>c.length===2),s=a.length>0?a[0]:"";return s!==""?"/"+s:s}function e(o){try{return new URL(o),!0}catch{return!1}}function n(o,a){if(o===null)return"";if(e(o)){const s=new URL(o);return s.pathname=a+s.pathname,s.toString()}return a+o}const r=document.querySelectorAll('[data-linguana-redirect="true"]');for(const o of r)o.getAttribute("redirect")&&o.setAttribute("redirect",n(o.getAttribute("redirect"),t())),o.getAttribute("data-redirect")&&o.setAttribute("data-redirect",n(o.getAttribute("data-redirect"),t()))}async function Kt(){Lt(),bt(),Ct(),await Et(),$t(),Pt(),It(),Nt(),Ht(),Vt(),Bt(),At(),Mt(),vt(),z(),zt()}function Yt(){wt(),Gt();async function t(){Zt(),St(),await yt(),ft(),rt(),await Kt()}document.addEventListener("DOMContentLoaded",async()=>{try{await t()}catch(e){console.error("Error during DOMContentLoaded:",e)}})}window.agera||(window.agera={dev:!1},Yt())})();
//# sourceMappingURL=index.js.map
