(function(){"use strict";async function N(t){return new Promise((e,r)=>{$.ajax({url:t.url,type:t.method,data:t.body,dataType:"jsonp",success:n=>{e(n)},error:(n,o,a)=>{r(a instanceof Error?a:new Error(a))}})})}function B(t,e){const r=t["data.name_id"];t&&r&&e?.push(["name_id",r.toString()])}function H(t){if(document.querySelector("[data-follow-redirect]")?.getAttribute("data-follow-redirect")?.toLowerCase()?.trim()==="true")try{const r=t["data.redirect_url"];r&&typeof r=="string"&&(window.location.href=new URL(r).href)}catch(r){console.error("Invalid redirect URL:",r)}}const E=(t,{parentKey:e=""}={})=>{const r={};return Object.keys(t).forEach(n=>{const o=t[n],a=e?`${e}.${n}`:n;typeof o=="object"&&o!==null&&!Array.isArray(o)?Object.assign(r,E(o,{parentKey:a})):r[a]=o}),r};function V(){const t=localStorage.getItem("crm_data");return t?JSON.parse(t):(localStorage.removeItem("crm_data"),{})}function J(t){const e=E(V());Object.keys(e).length!==0&&B(e,t)}function x(t){const e=E(t);H(e)}function W(t,e){switch(t.tagName.toLowerCase()){case"input":case"textarea":case"select":t.value=e;break;case"a":t.href=e;break;case"img":t.src=e;break;case"video":case"audio":case"iframe":case"source":t.src=e;break;case"meta":t.content=e;break;default:t.textContent=e}}function z(){const t=localStorage.getItem("crm_data");if(!t)return;const e=E(JSON.parse(t));document.querySelectorAll("[data-insert-crm-response]").forEach(r=>{const n=r.getAttribute("data-insert-crm-response"),o=n?e[n]:void 0;o!==void 0&&W(r,String(o))})}function G(t){return typeof t=="object"&&t.hasOwnProperty("count")&&typeof t.count=="number"&&t.hasOwnProperty("name")&&typeof t.name=="string"}const p={apiUrl:document.querySelector("[agera-api-url]")?.getAttribute("agera-api-url")??atob("aHR0cHM6Ly91dGlscy1hcGkudmVyY2VsLmFwcC9hcGkv"),counterPath:"counter/",jsDelivrUrl:"https://data.jsdelivr.com/v1/packages/gh/ageraplattformen/agera.js/resolved?specifier=latest",wfSiteId:document.querySelector("html")?.dataset.wfSite??"0000",postalCodeUrl:atob("aHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L2doL2FnZXJhcGxhdHRmb3JtZW4vanMtbW9kdWxlc0BtYWluL3ppcC8=")},g={method:"POST",headers:{"Content-Type":"application/json"},critical:!0,waitForResponse:!0};function Z(t){const e=new FormData(t),r=[],n=[],o={};for(const[c,s]of e.entries())c.startsWith("tags")?r.push(s):c.startsWith("language")?n.push(s):["given-name","family-name","email","tel","postal-code","street-address","address-level2","country"].includes(c)||(o[c]=s);const a=t.getAttribute("action")||t.getAttribute("data-crm-endpoint")||"";return{...g,url:a??"",body:JSON.stringify({person:{given_name:e.get("given-name"),family_name:e.get("family-name"),email_addresses:[{address:e.get("email"),status:"subscribed"}],phone_numbers:[{number:e.get("tel")??"",status:"subscribed"}],postal_addresses:[{postal_code:e.get("postal-code")??"",address_lines:e.get("street-address")??"",region:e.get("adress-level2")??"",country:e.get("country")??""}]},add_tags:[...r],"action_network:referrer_data":{source:m.source?m.source.toString():"",website:window.location.hostname+window.location.pathname},languages_spoken:[...n],custom_fields:o})}}function K(t){const e=t?.getAttribute("data-country-code")||"";return{...g,url:new URL("amnesty/",p.apiUrl).toString(),body:JSON.stringify({form:{...Object.fromEntries(new FormData(t)),action_id:t.dataset.actionId||"9999",sign_method:t.dataset.signMethod||"agera-default"},UTM:w,site_id:p.wfSiteId,source:window.location.href,...e?{country_code:e}:{}})}}function D(t,e=!1,r,n){const o=new FormData(t),a="data-action-id",c=t.getAttribute(a)||"No ActionID Provided",s=atob("aHR0cHM6Ly9hY3QuZGp1cmVuc3JhdHQuc2UvcmVmb3JtLXNvY2lldHkvYXBpLw==");if(e){const i=JSON.parse(n||"{}"),l=!!(r&&r["data-recruit-me"]==="true");return{...g,url:s+"update",body:JSON.stringify({partId:i.partId||"",recruitMe:l,signature:{actionId:r&&r[a]||"No ActionID Provided",source:w||"reform-campaign"}})}}const u=!!o.get("updates");return{...g,url:s+"register",body:JSON.stringify({person:{first:o.get("given-name")||"",last:o.get("family-name")||"",email:o.get("email")||"",mobile:o.get("tel")||""},acquisition:{actionId:c.toString(),source:w||"",marketingPermission:u}})}}async function Y(t,e,r){async function n(o){try{const a=await fetch(o.url,{method:o.method,headers:o.headers,body:o.body,keepalive:!0});if(!a.ok)throw new Error(`Request failed with status ${a.status}`);await a.json()}catch(a){throw a}}await n(D(t,!0,e,r))}function Q(t){const r=ot(t,{"given-name":"FNAME","family-name":"LNAME",email:"EMAIL",tel:"PHONE","street-adress":"ADDRESS","postal-code":"POSTALCODE","adress-level2":"REGION",country:"COUNTRY"}),n=t?.getAttribute("data-mailchimp-tags")||"";n!==""&&r.append("tags",n);const o=new URLSearchParams;for(const[a,c]of r.entries())(typeof c=="string"||typeof c=="number")&&o.append(a,c.toString());return o.append("UTM",w),{...g,url:t.getAttribute("action")?.replace("post?","post-json?")+"&c=?",headers:{"Content-Type":"application/x-www-form-urlencoded"},dataType:"jsonp",body:o.toString()}}function X(t){const e=new URL(document.querySelector("html")?.dataset.wfSite??"0000","https://webflow.com/api/v1/form/"),r=new FormData(t);r.append("UTM",w);const n=new URLSearchParams({name:t?.getAttribute("name")??"form",source:window.location.href});for(const o of r.entries()){const a=`fields[${o[0]}]`;n.append(a,o[1])}return{...g,url:e.href,headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n.toString()}}function tt(t){return{...g,url:t.getAttribute("action")||"",body:JSON.stringify({[t.getAttribute("name")||"form"]:Object.fromEntries(new FormData(t)),source:window.location.href,time:new Date().toISOString(),UTM:w})}}function et(t){return{...g,url:"",critical:!1,dummy:!0}}const T={actionnetwork:Z,amnesty:K,djurensratt:D,mailchimp:Q,webflow:X,zapier:tt,none:et};async function O(t,e){const r={method:t.method,headers:{...t.headers,...t.url.includes(p.apiUrl)&&{"x-source":window.location.href}},body:t.body},n=e?.waitForResponse?.toLowerCase()!=="false",o=Number(e?.waitForResponseDelay)||100;try{if(t.dataType==="jsonp")return await N(t);if(!n)return"keepalive"in new Request("")?(console.warn("not waiting for response, using keepalive..."),fetch(t.url,{...r,keepalive:!0})):(console.warn("Using sendBeacon..."),navigator.sendBeacon(t.url,r.body)),new Promise(s=>setTimeout(s,o));const a=await fetch(t.url,r);if(!a.ok)throw new Error(`Error fetching ${t.url}: ${a.statusText}`);return a.headers.get("Content-Type")?.includes("application/json")?await a.json():await a.text()}catch(a){throw new Error(`Error fetching ${t.url}: ${String(a)}`)}}async function rt(t,e,r,n,o,a,c){const s=new URL("fcrm/",p.apiUrl).toString();c?.waitForResponse||(c={...c,waitForResponse:"false"});const u=r["data-crm-endpoint"]||r["data-profundo-url"],i={method:a.toUpperCase(),headers:{"Content-Type":"application/json"},url:s,body:JSON.stringify({crm:t,...e?{client:e}:{},...u?{crm_endpoint:u}:{},attributes:r,response:JSON.parse(o),body:n?{...Object.fromEntries(n)}:{},...y.size>0?{query_params:{...Object.fromEntries(y)}}:{},source:window.location.href,...C?{...C}:{}})};return O(i,c)}function nt(){const t=localStorage.getItem("crm_data")||"{}",e=[...document.querySelectorAll("[data-crm-patch]"),...document.querySelectorAll("[data-profundo-client]")];if(e.length===0)return;async function r(n){const o=n.currentTarget,a=o.getAttribute("data-crm-patch")??(o.getAttribute("data-profundo-client")?"profundo":""),c=o.getAttribute("data-client")??o.getAttribute("data-profundo-client")??"";let s=o.getAttribute("data-crm-patch-method")??"POST";a==="unhcrse"&&(s="PATCH");const u={};[...o.attributes].forEach(d=>{d.name.startsWith("data-")&&(u[d.name]=d.value)});const i=document.querySelector("[data-load-petition]")??o.closest("form")??null,l=i?new FormData(i):new FormData;if(!T.hasOwnProperty(a)){const d=await rt(a,c,u,l,t,s,i?.dataset);d&&(localStorage.setItem("crm_data",JSON.stringify(d)),x(d));return}a==="djurensratt"&&i&&await Y(i,u,t)}e.forEach(n=>{n.addEventListener("click",o=>{try{r(o).then(()=>{}).catch(a=>{console.error("Error handling patch:",a)})}catch(a){console.error("Error handling patch:",a)}}),n.style.cursor="pointer"})}function ot(t,e){const r=new FormData;for(const[n,o]of new FormData(t))e.hasOwnProperty(n)?r.append(e[n],o):r.append(n,o);return r}const y=new URLSearchParams(window.location.search);function at(){function t(r){const n=[...y.keys()].find(o=>o.toLowerCase().includes(r));return n?y.get(n)??"":""}return{source:t("source").toLowerCase(),campaign:t("campaign").toLowerCase(),medium:t("medium").toLowerCase(),content:t("content").toLowerCase(),term:t("term").toLowerCase(),wec:t("wec").toLowerCase()}}const m=at(),w=Array.from(y,([t,e])=>`${t.toLowerCase()}: ${e.toLowerCase()}`).join(", "),C={utms:{...m.campaign?{utm_campaign:m.campaign}:{},...m.source?{utm_source:m.source}:{},...m.medium?{utm_medium:m.medium}:{},...m.content?{utm_content:m.content}:{},...m.term?{utm_term:m.term}:{},...m.wec?{utm_wec:m.wec}:{}}};function j(t){const e=new FormData(t),r={};return t&&(Array.from(t.attributes).forEach(o=>{o.name.startsWith("data-")&&(r[o.name]=o.value)}),r["data-site-id"]=r["data-site-id"]||p.wfSiteId),{...g,url:new URL("fcrm/",p.apiUrl).toString(),body:JSON.stringify({crm:t?.dataset.crm??"",...t?.dataset.client?{client:t.dataset.client}:{},...t?.dataset.crmEndpoint||t?.action&&!t.action.includes(window.location.host)?{crm_endpoint:t?.dataset.crmEndpoint??t?.action}:{},body:{...Object.fromEntries(e)},...C?{...C}:{},...y.size>0?{query_params:{...Object.fromEntries(y)}}:{},source:window.location.href,...r?{attributes:{...r}}:{}})}}async function st(t,e,r){try{const n=await Promise.allSettled(t.map(a=>a.dummy?Promise.resolve({success:!0}):O(a,e.dataset)));n.some((a,c)=>a.status==="rejected"&&t[c].critical)?L(!1,!1,e,r):(ct(n),L(!0,!0,e,r))}catch(n){console.error("Error in Promise.allSettled:",n),L(!1,!1,e,r)}}function ct(t){const e=[];if(t.forEach((r,n)=>{if(r.status==="fulfilled"&&r.value!==null){const o=r.value;if(typeof r.value=="object"&&!G(o)){const a=r.value;e.push(a)}else typeof r.value=="string"&&e.push({[n.toString()]:r.value})}}),e.length>0){const r={};e.forEach(n=>{Object.assign(r,n)}),localStorage.setItem("crm_data",JSON.stringify(r)),x(r)}}function L(t,e,r,n){const o=r.parentNode?.querySelector(".w-form-done"),a=r.parentNode?.querySelector(".w-form-fail"),c=r.dataset?.showSuccess?.toLowerCase()!=="false";t?(c&&(o?.style.setProperty("display","block"),r.style.display="none"),e&&it(r,n)):(o?.style.setProperty("display","none"),a?.style.setProperty("display","block"),n.submitButton&&(n.submitButton.value=n.submitText))}function it(t,e){const r=t.getAttribute("redirect")??null;if(r)if(e.addUtm){const n=new URL(r,e.thisUrl),o=new URLSearchParams(window.location.search);n.searchParams.forEach((c,s)=>{o.has(s)||o.set(s,c)});const a=n.origin+n.pathname+(o.toString()?`?${o.toString()}`:"");window.location.href=a}else window.location.href=r;else e.submitButton&&(e.submitButton.value=e.submitButton.dataset.successText||e.submitText),console.warn("No redirect defined")}function ut(t){const e=/^data-counter(\d+)?-update$/;return Array.from(t.attributes).filter(n=>e.test(n.name)).map(n=>{const o=/\d+/.exec(n.name),a=o?o[0]:null,c=n.value,s=`data-counter${a||""}-add-amount`,u=t.querySelector(`[${s}]`),i=u?Number(u.value||u.getAttribute(s)):null;return lt(c,t,i)})}function lt(t,e,r){const n=new FormData(e);return{...g,critical:!1,url:new URL(p.counterPath+t,p.apiUrl).toString(),body:JSON.stringify({form:"default",site_id:p.wfSiteId,last_person:n.get("given-name")||"",form_url:window.location.href,...r?{add_amount:r}:{}})}}function dt(t){const e={thisUrl:new URL(window.location.href),addUtm:t.dataset.redirectUtm??!0,submitButton:t.querySelector('input[type="submit"]'),submitText:t.querySelector('input[type="submit"]')?.value??""};async function r(n){n.preventDefault(),n.stopPropagation(),e.submitButton&&(e.submitButton.value=e.submitButton.dataset.wait??e.submitButton.value);const o=[],a=t.dataset.crm?.toLowerCase()??"webflow",c=T[a]??j;o.push(c(t)),c!==j&&o.push(...ut(t)),o.length&&await st(o,t,e)}t.addEventListener("submit",n=>{n.preventDefault(),r(n).catch(o=>console.error(o))})}function ft(){document.querySelectorAll("[data-crm]").forEach(e=>{dt(e)})}class mt{constructor(){this.cache=new Map,this.pendingRequests=new Map}async getCounter(e){if(this.cache.has(e))return this.cache.get(e);if(this.pendingRequests.has(e))return this.pendingRequests.get(e);const r=this.fetchCounter(e);this.pendingRequests.set(e,r);try{const n=await r;return this.cache.set(e,n),n}finally{this.pendingRequests.delete(e)}}async fetchCounter(e){const r=new URL(p.counterPath+e,p.apiUrl);try{const n=await fetch(r,{headers:{"x-source":window.location.href}});if(!n.ok)throw new Error(`HTTP ${n.status}`);return await n.json()}catch(n){return console.error("Error fetching counter:",n),{count:0,name:e,last_person:{names:[]}}}}}const pt=new mt;async function ht(){try{const t=await fetch(p.jsDelivrUrl);if(!t.ok)return"latest";const e=await t.json();return e?.version?`v${e.version}`:"latest"}catch(t){return console.error(t),"latest"}}function gt(){function t(s,u){return s>=u?100:Math.round(s/u*100)}function e(s){const u={350:50,500:100,2e3:250,5e3:500,2e4:2500,5e4:5e3,1e5:1e4,2e5:25e3,5e5:5e4,1e6:1e5},i=25e4,d=Object.keys(u).map(Number).find(S=>S>=s),f=d?u[d]:i;return Math.ceil(s*1.05/f)*f}function r(s,u){return s*1.05<u.target?u.target:e(s)}function n(s,u,i){s.style.width=t(u,i)+"%"}function o(s,u,i){try{const l=new Intl.NumberFormat(i.locale,i.notation).format(u);s.textContent=l}catch{i.notation.useGrouping=!1,i.notation.notation="standard";const l=new Intl.NumberFormat(void 0,i.notation).format(u);s.textContent=l}}function a(s,u,i){u<=i.removeBelow&&(s.style.display="none"),u>=i.hideBelow&&(s.style.opacity="1")}async function c(s){const u=s.dataset.counterName||"default",i={target:parseInt(s.dataset.counterTarget||"0",10),hideBelow:parseInt(s.dataset.counterHideBelow||"0"),removeBelow:parseInt(s.dataset.counterRemoveBelow||"0"),autoTarget:!!s.dataset.counterAutoTarget||!0,locale:s.dataset.counterLocale||document.documentElement.lang||"undefined",notation:{notation:s.dataset.counterNotation?.toLowerCase()||"standard",useGrouping:!0}};async function l(h){try{if(h.toLowerCase()==="default")return 125;const A=await pt.getCounter(h);return window.agera=window.agera??{},window.agera.counterValues=window.agera.counterValues??{},window.agera.counterValues[h]=A.count,A.count}catch(A){return console.error(`Error getting counter value for ${h}:`,A),0}}const d=await l(u);if(s.classList.contains("counter-current-value"))o(s,d,i),a(s,d,i);else{const h=s.querySelectorAll(".counter-current-value");for(const A of h)o(A,d,i),a(A,d,i)}const f=r(d,i),S=s.querySelectorAll(".counter-target-value");for(const h of S)o(h,f,i),a(h,d,i);const Qt=s.querySelectorAll(".counterbar-limiter");for(const h of Qt)n(h,d,f);a(s,d,i)}return{processCounterElement:c}}function wt(){const t=".counter-target-value, .counter-current-value, .counter_container { opacity: 0; transition: opacity 0.7s; }",e=document.createElement("style");e.textContent=t,document.head.appendChild(e)}async function yt(){const t=document.querySelectorAll("[data-counter-name]"),e=gt();for(const r of t)await e.processCounterElement(r)}function U(t){return JSON.parse(localStorage.getItem(t)??"{}")}function bt(){const t="data-clear-localstorage",e=document.querySelector(`[${t}]`);if(!e)return;const r=e.getAttribute(t),n=e.matches("a, button"),o=()=>{r?.toLowerCase()==="true"||r?.toLowerCase()==="all"?(console.log("Clearing all local storage"),localStorage.clear()):r&&(console.log("Clearing local storage key:",r),localStorage.removeItem(r))};n?e.addEventListener("click",a=>{a.preventDefault(),o(),document.querySelectorAll("form").forEach(c=>{c.reset()}),window.location.reload()}):o()}function St(){function t(o){const a=U("forwardedform");J(Object.entries(a));function c(i){const l=Array.from(new URLSearchParams(window.location.search),([d,f])=>`${d}: ${f}`).join(", ");return i.utm=l,i}const s=c(a);function u(i){Object.entries(i).forEach(([l,d])=>{if(d){const f=document.createTextNode(d).textContent,S=`<input type="hidden" id="${l}" name="${l}" value="${f}">`;o.insertAdjacentHTML("afterbegin",S)}})}u(s)}function e(o){const a=new URLSearchParams(window.location.search),c=Array.from(a,([i,l])=>`${i}: ${l}`),s=o.getAttribute("redirect");if(s){const i=s+(s?.includes("?")?"&":"?")+a.toString();o.setAttribute("redirect",i),o.setAttribute("data-redirect",i)}window.addEventListener("beforeunload",()=>{u(o)});function u(i){if(i instanceof HTMLFormElement){const l=new FormData(i),d=c.join(", ");l.set("utm",d),localStorage.setItem("forwardedform",JSON.stringify(Object.fromEntries(l)))}}}const r=document.querySelectorAll("[data-crm]");r.length>0&&r.forEach(function(o){e(o)});const n=document.querySelectorAll('[data-load-petition="true"]');n.length>0&&n.forEach(function(o){t(o)})}function At(){const t=document.querySelector("form[data-auto-submit]");if(t&&t.getAttribute("data-auto-submit")?.toLowerCase()==="true"){if(!t.checkValidity()){console.warn("Form validation failed.");return}const e=new Event("submit",{bubbles:!0,cancelable:!0});t.dispatchEvent(e)}}function Et(){document.querySelectorAll("[data-copy]").forEach(e=>{e.addEventListener("mouseover",function(){e.style.cursor="pointer"}),e.addEventListener("click",async function(){let r="";const n=e.getAttribute("data-copy");if(n?.toLowerCase()==="url")r=window.location.href;else if(n?.toLowerCase()==="prev-url")r=document.referrer||"";else{const o=document.getElementById(n);o?.textContent?r=o.textContent:r=n||""}try{await navigator.clipboard.writeText(r),console.log("Copied to clipboard:",r.toString())}catch(o){console.error("Failed to copy: ",o)}})})}async function Ct(){const t=document.querySelectorAll("[data-js-version]");if(t.length<1)return;const e=document.querySelector('script[src$="agera.js"]');let r="";if(e){const{src:n}=e,o=/@([^/]+)/.exec(n);if(o){const[,a]=o;r=a,r.toLowerCase().includes("latest")&&(r=await ht())}}r!==""&&t.forEach(n=>{n.innerText=r})}function vt(){document.querySelectorAll("[data-hide-if-data], [data-show-if-data]").forEach(t=>{const e=t.getAttribute("data-hide-if-data")??t.getAttribute("data-show-if-data");if(!e)return;const r=!!t.getAttribute("data-hide-if-data"),n=e?new URLSearchParams(window.location.search).get(e)??"":"",o=e&&U("forwardedform")[e]||"",a=!!(n||o);t.style.display=r===a?"none":"",t.style.display=="none"&&t.getAttribute("name")&&t.setAttribute("name",t.getAttribute("name")+"-hidden"),r&&t.tagName==="INPUT"&&t.required&&(t.required=!1)})}function Lt(){const t=document.querySelectorAll("a[href]"),e=new URLSearchParams(window.location.search);t.forEach(r=>{if(!r.href.includes("#")){const n=new URL(r.href,window.location.href);n.searchParams.forEach((a,c)=>{e.has(c)||e.append(c,a)});const o=e.toString();r.href+=`${n.search?"&":"?"}${o}${n.hash}`}})}const F="data-insert-name";function Ut(t,e){let r="";const n=["first_name","first-name","firstname","fn","first","fname","f-name","n","given_name","given-name","givenname","gn","g-n","given"];[...Object.entries(t),...Array.from(e.entries())].forEach(([a,c])=>{n.includes(a.toLowerCase())&&(r=c)});const o=document.querySelectorAll(`[${F}]`);o.length>0&&r!==""&&Rt(o,r)}function Rt(t,e){const r={"no-space":e,"leading-space":"&nbsp;"+e,"trailing-space":e+"&nbsp;","double-space":"&nbsp;"+e+"&nbsp;","":"&nbsp;"+e};t.forEach(n=>{const o=n.getAttribute(F)||"leading-space";r.hasOwnProperty(o)&&(n.innerHTML=r[o])})}function Pt(){const t=U("forwardedform"),e=new URLSearchParams(window.location.search);Ut(t,e)}const R=typeof Buffer=="function",_=typeof TextDecoder=="function"?new TextDecoder:void 0;typeof TextEncoder=="function"&&new TextEncoder;const xt=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),v=(t=>{let e={};return t.forEach((r,n)=>e[r]=n),e})(xt),Dt=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,b=String.fromCharCode.bind(String),q=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):t=>new Uint8Array(Array.prototype.slice.call(t,0)),k=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),Tt=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Ot=t=>{switch(t.length){case 4:var e=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),r=e-65536;return b((r>>>10)+55296)+b((r&1023)+56320);case 3:return b((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return b((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},jt=t=>t.replace(Tt,Ot),I=typeof atob=="function"?t=>atob(k(t)):R?t=>Buffer.from(t,"base64").toString("binary"):t=>{if(t=t.replace(/\s+/g,""),!Dt.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(t.length&3));let e,r="",n,o;for(let a=0;a<t.length;)e=v[t.charAt(a++)]<<18|v[t.charAt(a++)]<<12|(n=v[t.charAt(a++)])<<6|(o=v[t.charAt(a++)]),r+=n===64?b(e>>16&255):o===64?b(e>>16&255,e>>8&255):b(e>>16&255,e>>8&255,e&255);return r},Ft=R?t=>q(Buffer.from(t,"base64")):t=>q(I(t).split("").map(e=>e.charCodeAt(0))),_t=R?t=>Buffer.from(t,"base64").toString("utf8"):_?t=>_.decode(Ft(t)):t=>jt(I(t)),qt=t=>k(t.replace(/[-_]/g,e=>e=="-"?"+":"/")),kt=t=>_t(qt(t));function It(){document.querySelectorAll("[data-insert-query]").forEach(e=>{const r=e.getAttribute("data-insert-query");if(r){const n=new URLSearchParams(window.location.search).get(r);n!==null&&(e instanceof HTMLInputElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement?e.value=n.toString():e.textContent=n.toString())}})}function $t(){document.querySelectorAll("[data-insert-b64-query]").forEach(e=>{const r=e.getAttribute("data-insert-b64-query");if(r){const n=kt(new URLSearchParams(window.location.search).get(r)??"");n&&(e instanceof HTMLInputElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement?e.value=n.toString():e.textContent=n.toString())}})}const P={DK:/^\d{4}$/,FI:/^(FI-|AX-)?\d{5}$/,NO:/^\d{4}$/,SE:/^(SE-)?\d{3}[ ]?\d{2}$/};function Mt(){async function t(n){const o=`${p.postalCodeUrl}${n}.js`;return(!P.hasOwnProperty(n)||!o)&&console.error("Unsupported country code"),(await import(o))[n]}async function e(n){if(!(n.getAttribute("data-postalcode-place-autofill")?.toLowerCase()==="true"))return;const a=n.querySelectorAll('[name="postal-code"]'),c=n.querySelectorAll('[name="address-level2"]'),s=n.dataset.countryCode?.toUpperCase()??"",u=Array.from(a).find(l=>l.type!=="hidden"&&l.offsetParent!==null)??a[0],i=Array.from(c).find(l=>l.type!=="hidden"&&l.offsetParent!==null)??c[0];if(!i||!u||s===""||!P.hasOwnProperty(s)){console.error("Visible postal code input, visible city output, or supported country not found");return}try{const l=await t(s),d=!1;u.addEventListener("input",()=>{const f=u.value.replaceAll(" ",""),S=P[s];f.length>3&&S.test(f)&&!d&&(i.value=l[f]||i.value)})}catch(l){console.error("Error loading postal codes:",l)}}async function r(){const n=document.querySelectorAll("[data-postalcode-place-autofill]");for(const o of n)await e(o)}r().catch(n=>{console.error("Postcode Place Autofill Error:",n)})}function Nt(){const t=new URLSearchParams(window.location.search);document.querySelectorAll("[data-redirect]").forEach(r=>{const n=r.getAttribute("data-redirect");try{if(n){const o=new URL(n,document.baseURI),a=new URL(o.toString()),c=a.searchParams;t.forEach((s,u)=>{c.has(u)||c.set(u,s)}),r.setAttribute("data-redirect",a.toString())}}catch(o){console.error("An error occurred:",o)}})}function Bt(){Object.entries({"[data-share-whatsapp-text]":e=>`https://wa.me/?text=${encodeURIComponent(e)}`,"[data-share-facebook-url]":e=>`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(e)}`,"[data-share-linkedin-url]":e=>`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(e)}`,"[data-share-twitter-text]":e=>`https://twitter.com/intent/tweet?text=${encodeURIComponent(e)}`,"[data-share-email-subject], [data-share-email-body]":(e,r)=>`mailto:?subject=${encodeURIComponent(e)}&body=${encodeURIComponent(r)}`}).forEach(([e,r])=>{document.querySelectorAll(e).forEach(n=>{n.addEventListener("click",o=>{o.preventDefault();const a=e.includes("email"),c=n.getAttribute(a?"data-share-email-subject":e.slice(1,-1))??"",s=a?n.getAttribute("data-share-email-body")??"":"",u=r(c,s);window.open(u,a?"_self":"_blank")})})})}function Ht(){const t=document.querySelectorAll("*"),e=[],r={};let n="",o=!0;t.forEach(c=>{const{attributes:s}=c,u={};Array.from(s).forEach(i=>{u[i.name]=i.value}),Object.entries(u).forEach(([i,l])=>{if(i.startsWith("data-splitter-url")){e.push(l);const f=`data-splitter-params${i.replace("data-splitter-url","")}`;u[f]&&(r[l]=u[f])}else i==="data-splitter-params"?n=l:(i==="data-splitter-keep-params"||i==="data-splitter-keep-query")&&l==="false"&&(o=!1)})});function a(c,s){if(c)try{new URLSearchParams(c).forEach((i,l)=>{if(s.searchParams.has(l)){const d=s.searchParams.get(l);s.searchParams.set(l,`${d}${i}`)}else s.searchParams.set(l,i)})}catch(u){console.error("Error processing parameter string:",c,u)}}if(e.length)try{const c=e[Math.floor(Math.random()*e.length)],s=window.location,u=new URL(c,s.origin);if(o&&s.search)try{new URLSearchParams(s.search).forEach((l,d)=>{u.searchParams.append(d,l)})}catch(i){console.error("Error processing current URL parameters:",i)}a(n,u),a(r[c],u),window.location.href=u.href}catch(c){console.error("Error in URL splitter:",c)}}function Vt(){const t=[document.documentElement.lang||"en","en"];document.querySelectorAll("[data-insert-time]").forEach(n=>{n.innerText=Jt(n,t)}),document.querySelectorAll("[data-remaining-days-to]").forEach(n=>{n.innerText=Wt(n,t)})}function Jt(t,e){const r=new Date,n=t.getAttribute("data-insert-time");let o="";if(n?.toLowerCase()==="year")o=r.getFullYear().toString();else if(n?.toLowerCase()==="month")o=(r.getMonth()+1).toString();else if(n?.toLowerCase()==="day")o=r.getDate().toString();else if(n?.toLowerCase()==="date")o=r.toLocaleDateString(e);else if(n?.toLowerCase()==="datetime")o=r.toLocaleString(e);else if(n?.toLowerCase()==="time")o=r.toLocaleTimeString(e);else return"";return o}function Wt(t,e){const r=new Date,n=t.getAttribute("data-remaining-days-to");try{if(n){const o=new Date(n),a=Math.round((o.getTime()-r.getTime())/(1e3*60*60*24));return new Intl.RelativeTimeFormat(e,{numeric:"auto"}).format(a,"day")}}catch(o){console.error("remainingDays error:",o)}return""}const M={"family-name":{pattern:"^(?=.*\\p{L})[\\p{L}\\p{M}\\s'\\-.,]{1,80}$",autocomplete:"family-name"},"given-name":{pattern:"^(?=.*\\p{L})[\\p{L}\\p{M}\\s'\\-.,]{1,40}$",autocomplete:"given-name"},email:{pattern:"^[^@]+@[^@]+\\.[^@\\s]+(\\.[^@\\s]+)*$",autocomplete:"email"},"work-email":{pattern:"^[^@]+@[^@]+\\.[^@\\s]+(\\.[^@\\s]+)*$"}};function zt(t=Object.keys(M),e={}){const r={...M,...e};t.forEach(n=>{document.querySelectorAll(`input[name="${n}"]`).forEach(a=>{a.getAttribute("data-validate-input")==="false"||a.type==="hidden"||r[n]&&(a.pattern||(a.pattern=r[n].pattern),r[n].autocomplete&&!a.getAttribute("autocomplete")&&a.setAttribute("autocomplete",r[n].autocomplete))})})}function Gt(){{const t=".cloak {opacity: 0;height: 0;overflow: hidden;margin: 0;padding-top: 0;padding-bottom: 0;}",e=document.createElement("style");e.textContent=t,document.head.appendChild(e)}}function Zt(){function t(){const a=window.location.pathname.split("/").filter(s=>s.length===2),c=a.length>0?a[0]:"";return c!==""?"/"+c:c}function e(o){try{return new URL(o),!0}catch{return!1}}function r(o,a){if(o===null)return"";if(e(o)){const c=new URL(o);return c.pathname=a+c.pathname,c.toString()}return a+o}const n=document.querySelectorAll('[data-linguana-redirect="true"]');for(const o of n)o.getAttribute("redirect")&&o.setAttribute("redirect",r(o.getAttribute("redirect"),t())),o.getAttribute("data-redirect")&&o.setAttribute("data-redirect",r(o.getAttribute("data-redirect"),t()))}async function Kt(){Lt(),bt(),Et(),await Ct(),$t(),Pt(),It(),Nt(),Ht(),Vt(),Bt(),At(),Mt(),vt(),z(),zt()}function Yt(){wt(),Gt();async function t(){Zt(),St(),await yt(),ft(),nt(),await Kt()}document.addEventListener("DOMContentLoaded",async()=>{try{await t()}catch(e){console.error("Error during DOMContentLoaded:",e)}})}window.agera||(window.agera={dev:!1},Yt())})();
//# sourceMappingURL=index.js.map
