(function(){"use strict";async function W(t){return new Promise((e,r)=>{$.ajax({url:t.url,type:t.method,data:t.body,dataType:"jsonp",success:n=>{e(n)},error:(n,o,a)=>{r(a instanceof Error?a:new Error(a))}})})}function z(t){const e=new FormData(t),r={};return Array.from(t.elements).forEach(n=>{if(!(n instanceof HTMLInputElement||n instanceof HTMLSelectElement||n instanceof HTMLTextAreaElement)||!n.name)return;const o=n.name,a=e.get(o)??"",s=n.getAttribute("data-json-group");s&&((r[s]??(r[s]={}))[o]=a)}),Object.entries(r).map(([n,o])=>({[n]:o}))}function G(t,e){const r=t["data.name_id"];t&&r&&e?.push(["name_id",r.toString()])}function Z(t){if(document.querySelector("[data-follow-redirect]")?.getAttribute("data-follow-redirect")?.toLowerCase()?.trim()==="true")try{const r=t["data.redirect_url"];r&&typeof r=="string"&&(window.location.href=new URL(r).href)}catch(r){console.error("Invalid redirect URL:",r)}}const C=(t,{parentKey:e=""}={})=>{const r={};return Object.keys(t).forEach(n=>{const o=t[n],a=e?`${e}.${n}`:n;typeof o=="object"&&o!==null&&!Array.isArray(o)?Object.assign(r,C(o,{parentKey:a})):r[a]=o}),r};function K(){const t=localStorage.getItem("crm_data");return t?JSON.parse(t):(localStorage.removeItem("crm_data"),{})}function X(t){const e=C(K());Object.keys(e).length!==0&&G(e,t)}function O(t){const e=C(t);Y(e),Z(e)}function Y(t){if(document.querySelector("[data-follow-redirect]")?.getAttribute("data-follow-redirect")?.toLowerCase()?.trim()!=="false")try{const r=t.agera_redirect_url;r&&typeof r=="string"&&(window.location.href=new URL(r).href)}catch(r){console.error("Invalid redirect URL:",r)}}function Q(t,e){switch(t.tagName.toLowerCase()){case"input":case"textarea":case"select":t.value=e;break;case"a":t.href=e;break;case"img":t.src=e;break;case"video":case"audio":case"iframe":case"source":t.src=e;break;case"meta":t.content=e;break;default:t.textContent=e}}function tt(){const t=localStorage.getItem("crm_data");if(!t)return;const e=C(JSON.parse(t));document.querySelectorAll("[data-insert-crm-response]").forEach(r=>{const n=r.getAttribute("data-insert-crm-response"),o=n?e[n]:void 0;o!==void 0&&Q(r,String(o))})}function et(t){return typeof t=="object"&&t.hasOwnProperty("count")&&typeof t.count=="number"&&t.hasOwnProperty("name")&&typeof t.name=="string"}const g={apiUrl:document.querySelector("[api-url]")?.getAttribute("api-url")??atob("aHR0cHM6Ly91dGlscy1hcGkudmVyY2VsLmFwcC9hcGkv"),counterPath:"counter/",jsDelivrUrl:"https://data.jsdelivr.com/v1/packages/gh/ageraplattformen/agera.js/resolved?specifier=latest",wfSiteId:document.querySelector("html")?.dataset.wfSite??"0000",postalCodeUrl:atob("aHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L2doL2FnZXJhcGxhdHRmb3JtZW4vanMtbW9kdWxlc0BtYWluL3ppcC8=")},w={method:"POST",headers:{"Content-Type":"application/json"},critical:!0,waitForResponse:!0};function rt(t){const e=new FormData(t),r=[],n=[],o={};for(const[s,i]of e.entries())s.startsWith("tags")?r.push(i):s.startsWith("language")?n.push(i):["given-name","family-name","email","tel","postal-code","street-address","address-level2","country"].includes(s)||(o[s]=i);const a=t.getAttribute("action")||t.getAttribute("data-crm-endpoint")||"";return{...w,url:a??"",body:JSON.stringify({person:{given_name:e.get("given-name"),family_name:e.get("family-name"),email_addresses:[{address:e.get("email"),status:"subscribed"}],phone_numbers:[{number:e.get("tel")??"",status:"subscribed"}],postal_addresses:[{postal_code:e.get("postal-code")??"",address_lines:e.get("street-address")??"",region:e.get("adress-level2")??"",country:e.get("country")??""}]},add_tags:[...r],"action_network:referrer_data":{source:m.source?m.source.toString():"",website:window.location.hostname+window.location.pathname},languages_spoken:[...n],custom_fields:o})}}function j(t,e=!1,r,n){const o=new FormData(t),a="data-action-id",s=t.getAttribute(a)||"No ActionID Provided",i=atob("aHR0cHM6Ly9hY3QuZGp1cmVuc3JhdHQuc2UvcmVmb3JtLXNvY2lldHkvYXBpLw==");if(e){const c=JSON.parse(n||"{}"),d=!!(r&&r["data-recruit-me"]==="true");return{...w,url:i+"update",body:JSON.stringify({partId:c.partId||"",recruitMe:d,signature:{actionId:r&&r[a]||"No ActionID Provided",source:S||"reform-campaign"}})}}const l=!!o.get("updates");return{...w,url:i+"register",body:JSON.stringify({person:{first:o.get("given-name")||"",last:o.get("family-name")||"",email:o.get("email")||"",mobile:o.get("tel")||""},acquisition:{actionId:s.toString(),source:S||"",marketingPermission:l}})}}async function nt(t,e,r){async function n(o){try{const a=await fetch(o.url,{method:o.method,headers:o.headers,body:o.body,keepalive:!0});if(!a.ok)throw new Error(`Request failed with status ${a.status}`);await a.json()}catch(a){throw a}}await n(j(t,!0,e,r))}function ot(t){const r=ut(t,{"given-name":"FNAME","family-name":"LNAME",email:"EMAIL",tel:"PHONE","street-adress":"ADDRESS","postal-code":"POSTALCODE","adress-level2":"REGION",country:"COUNTRY"}),n=t?.getAttribute("data-mailchimp-tags")||"";n!==""&&r.append("tags",n);const o=new URLSearchParams;for(const[a,s]of r.entries())(typeof s=="string"||typeof s=="number")&&o.append(a,s.toString());return o.append("UTM",S),{...w,url:t.getAttribute("action")?.replace("post?","post-json?")+"&c=?",headers:{"Content-Type":"application/x-www-form-urlencoded"},dataType:"jsonp",body:o.toString()}}function at(t){const e=new URL(document.querySelector("html")?.dataset.wfSite??"0000","https://webflow.com/api/v1/form/"),r=new FormData(t);r.append("UTM",S);const n=new URLSearchParams({name:t?.getAttribute("name")??"form",source:window.location.href});for(const o of r.entries()){const a=`fields[${o[0]}]`;n.append(a,o[1])}return{...w,url:e.href,headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n.toString()}}function st(t){return{...w,url:t.getAttribute("action")||"",body:JSON.stringify({[t.getAttribute("name")||"form"]:Object.fromEntries(new FormData(t)),source:window.location.href,time:new Date().toISOString(),UTM:S})}}function it(t){return{...w,url:"",critical:!1,dummy:!0}}const I={actionnetwork:rt,djurensratt:j,mailchimp:ot,webflow:at,zapier:st,none:it};async function _(t,e){const r={method:t.method,headers:{...t.headers,...t.url.includes(g.apiUrl)&&{"x-source":window.location.href}},body:t.body},n=e?.waitForResponse?.toLowerCase()!=="false",o=Number(e?.waitForResponseDelay)||100;try{if(t.dataType==="jsonp")return await W(t);if(!n)return"keepalive"in new Request("")?(console.warn("not waiting for response, using keepalive..."),fetch(t.url,{...r,keepalive:!0})):(console.warn("Using sendBeacon..."),navigator.sendBeacon(t.url,r.body)),new Promise(i=>setTimeout(i,o));const a=await fetch(t.url,r);if(!a.ok)throw new Error(`Error fetching ${t.url}: ${a.statusText}`);return a.headers.get("Content-Type")?.includes("application/json")?await a.json():await a.text()}catch(a){throw new Error(`Error fetching ${t.url}: ${String(a)}`)}}async function ct(t,e,r,n,o,a,s){const i=new URL("fcrm/",g.apiUrl).toString();s?.waitForResponse||(s={...s,waitForResponse:"false"});const l=r["data-crm-endpoint"]||r["data-profundo-url"],c={method:a.toUpperCase(),headers:{"Content-Type":"application/json"},url:i,body:JSON.stringify({crm:t,...e?{client:e}:{},...l?{crm_endpoint:l}:{},attributes:r,response:JSON.parse(o),body:n?{...Object.fromEntries(n)}:{},...b.size>0?{query_params:{...Object.fromEntries(b)}}:{},source:window.location.href,...L?{...L}:{}})};return _(c,s)}function lt(){const t=localStorage.getItem("crm_data")||"{}",e=[...document.querySelectorAll("[data-crm-patch]"),...document.querySelectorAll("[data-profundo-client]")];if(e.length===0)return;async function r(n){const o=n.currentTarget,a=o.getAttribute("data-crm-patch")??(o.getAttribute("data-profundo-client")?"profundo":""),s=o.getAttribute("data-client")??o.getAttribute("data-profundo-client")??"";let i=o.getAttribute("data-crm-patch-method")??"POST";a==="unhcrse"&&(i="PATCH");const l={};[...o.attributes].forEach(u=>{u.name.startsWith("data-")&&(l[u.name]=u.value)});const c=document.querySelector("[data-load-petition]")??o.closest("form")??null,d=c?new FormData(c):new FormData;if(!I.hasOwnProperty(a)){const u=await ct(a,s,l,d,t,i,c?.dataset);u&&(localStorage.setItem("crm_data",JSON.stringify(u)),O(u));return}a==="djurensratt"&&c&&await nt(c,l,t)}e.forEach(n=>{n.addEventListener("click",o=>{try{r(o).then(()=>{}).catch(a=>{console.error("Error handling patch:",a)})}catch(a){console.error("Error handling patch:",a)}}),n.style.cursor="pointer"})}function ut(t,e){const r=new FormData;for(const[n,o]of new FormData(t))e.hasOwnProperty(n)?r.append(e[n],o):r.append(n,o);return r}const b=new URLSearchParams(window.location.search);function dt(){function t(r){const n=[...b.keys()].find(o=>o.toLowerCase().includes(r));return n?b.get(n)??"":""}return{source:t("source").toLowerCase(),campaign:t("campaign").toLowerCase(),medium:t("medium").toLowerCase(),content:t("content").toLowerCase(),term:t("term").toLowerCase(),wec:t("wec").toLowerCase()}}const m=dt(),S=Array.from(b,([t,e])=>`${t.toLowerCase()}: ${e.toLowerCase()}`).join(", "),L={utms:{...m.campaign?{utm_campaign:m.campaign}:{},...m.source?{utm_source:m.source}:{},...m.medium?{utm_medium:m.medium}:{},...m.content?{utm_content:m.content}:{},...m.term?{utm_term:m.term}:{},...m.wec?{utm_wec:m.wec}:{}}};function F(t){const e=new FormData(t),r={};if(t){Array.from(t.attributes).forEach(a=>{a.name.startsWith("data-")&&(r[a.name]=a.value)}),r["data-site-id"]=r["data-site-id"]||g.wfSiteId;const o=z(t);o&&e.append("json-groups",JSON.stringify(o))}return{...w,url:new URL("fcrm/",g.apiUrl).toString(),body:JSON.stringify({crm:t?.dataset.crm??"",...t?.dataset.client?{client:t.dataset.client}:{},...t?.dataset.crmEndpoint||t?.action&&!t.action.includes(window.location.host)?{crm_endpoint:t?.dataset.crmEndpoint??t?.action}:{},body:{...Object.fromEntries(e)},...L?{...L}:{},...b.size>0?{query_params:{...Object.fromEntries(b)}}:{},source:window.location.href,...r?{attributes:{...r}}:{}})}}let y={fieldPath:"data.name_id",debug:!1};function ft(t,e){return e.split(".").reduce((r,n)=>{if(r&&typeof r=="object"&&n in r)return r[n]},t)}function U(t,...e){y.debug&&console.log(t,...e)}function q(t,e){if(e&&(y={...y,...e},U("Comparison configuration updated",y)),!t){U("waiting for data...");return}const r=y.fieldPath??"data.name_id";U(`Processing value comparison with path: ${r}`);try{const n=ft(t,r);if(n!==void 0&&(typeof n=="number"||typeof n=="string"))U(`Found value: ${n}`),y.onCompare?.(n);else{const o=`'${r}' not found or is not a valid type in data.`;y.debug&&console.warn(o)}}catch(n){y.debug&&console.error("Error processing comparison:",n)}}async function mt(t,e,r){try{const n=await Promise.allSettled(t.map(a=>a.dummy?Promise.resolve({success:!0}):_(a,e.dataset)));n.some((a,s)=>a.status==="rejected"&&t[s].critical)?P(!1,!1,e,r):(pt(n),P(!0,!0,e,r))}catch(n){console.error("Error in Promise.allSettled:",n),P(!1,!1,e,r)}}function pt(t){const e=[];if(t.forEach((r,n)=>{if(r.status==="fulfilled"&&r.value!==null){const o=r.value;if(typeof r.value=="object"&&!et(o)){const a=r.value;e.push(a)}else typeof r.value=="string"&&e.push({[n.toString()]:r.value})}}),e.length>0){const r={};e.forEach(n=>{Object.assign(r,n)}),localStorage.setItem("crm_data",JSON.stringify(r)),O(r),q(r)}}function P(t,e,r,n){const o=r.parentNode?.querySelector(".w-form-done"),a=r.parentNode?.querySelector(".w-form-fail"),s=r.dataset?.showSuccess?.toLowerCase()!=="false";t?(s&&(o?.style.setProperty("display","block"),r.style.display="none"),e&&ht(r,n)):(o?.style.setProperty("display","none"),a?.style.setProperty("display","block"),n.submitButton&&(n.submitButton.value=n.submitText))}function ht(t,e){const r=t.getAttribute("redirect")??null;if(r)if(e.addUtm){const n=new URL(r,e.thisUrl),o=new URLSearchParams(window.location.search);n.searchParams.forEach((s,i)=>{o.has(i)||o.set(i,s)});const a=n.origin+n.pathname+(o.toString()?`?${o.toString()}`:"");window.location.href=a}else window.location.href=r;else e.submitButton&&(e.submitButton.value=e.submitButton.dataset.successText||e.submitText),console.warn("No redirect defined")}function gt(t){const e=/^data-counter(\d+)?-update$/;return Array.from(t.attributes).filter(n=>e.test(n.name)).map(n=>{const o=/\d+/.exec(n.name),a=o?o[0]:null,s=n.value,i=`data-counter${a||""}-add-amount`,l=t.querySelector(`[${i}]`),c=l?Number(l.value||l.getAttribute(i)):null;return wt(s,t,c)})}function wt(t,e,r){const n=new FormData(e);return{...w,critical:!1,url:new URL(g.counterPath+t,g.apiUrl).toString(),body:JSON.stringify({form:"default",site_id:g.wfSiteId,last_person:n.get("given-name")||"",form_url:window.location.href,...r?{add_amount:r}:{}})}}function yt(t){const e={thisUrl:new URL(window.location.href),addUtm:t.dataset.redirectUtm??!0,submitButton:t.querySelector('input[type="submit"]'),submitText:t.querySelector('input[type="submit"]')?.value??""};async function r(n){n.preventDefault(),n.stopPropagation(),e.submitButton&&(e.submitButton.value=e.submitButton.dataset.wait??e.submitButton.value);const o=[],a=t.dataset.crm?.toLowerCase()??"webflow",s=I[a]??F;o.push(s(t)),s!==F&&o.push(...gt(t)),o.length&&await mt(o,t,e)}t.addEventListener("submit",n=>{n.preventDefault(),r(n).catch(o=>console.error(o))})}function bt(){document.querySelectorAll("[data-crm]").forEach(e=>{yt(e)})}class St{constructor(){this.cache=new Map,this.pendingRequests=new Map}async getCounter(e){if(this.cache.has(e))return this.cache.get(e);if(this.pendingRequests.has(e))return this.pendingRequests.get(e);const r=this.fetchCounter(e);this.pendingRequests.set(e,r);try{const n=await r;return this.cache.set(e,n),n}finally{this.pendingRequests.delete(e)}}async fetchCounter(e){const r=new URL(g.counterPath+e,g.apiUrl);try{const n=await fetch(r,{headers:{"x-source":window.location.href}});if(!n.ok)throw new Error(`HTTP ${n.status}`);return await n.json()}catch(n){return console.error("Error fetching counter:",n),{count:0,name:e,last_person:{names:[]}}}}}const At=new St;async function Et(){try{const t=await fetch(g.jsDelivrUrl);if(!t.ok)return"latest";const e=await t.json();return e?.version?`v${e.version}`:"latest"}catch(t){return console.error(t),"latest"}}function vt(){function t(i,l){return i>=l?100:Math.round(i/l*100)}function e(i){const l={350:50,500:100,2e3:250,5e3:500,2e4:2500,5e4:5e3,1e5:1e4,2e5:25e3,5e5:5e4,1e6:1e5},c=25e4,u=Object.keys(l).map(Number).find(h=>h>=i),f=u?l[u]:c;return Math.ceil(i*1.05/f)*f}function r(i,l){return i*1.05<l.target?l.target:e(i)}function n(i,l,c){i.style.width=t(l,c)+"%"}function o(i,l,c){try{const d=new Intl.NumberFormat(c.locale,c.notation).format(l);i.textContent=d}catch{c.notation.useGrouping=!1,c.notation.notation="standard";const d=new Intl.NumberFormat(void 0,c.notation).format(l);i.textContent=d}}function a(i,l,c){l<=c.removeBelow&&(i.style.display="none"),l>=c.hideBelow&&(i.style.opacity="1")}async function s(i){const l=i.dataset.counterName||"default",c={target:parseInt(i.dataset.counterTarget||"0",10),hideBelow:parseInt(i.dataset.counterHideBelow||"0"),removeBelow:parseInt(i.dataset.counterRemoveBelow||"0"),autoTarget:!!i.dataset.counterAutoTarget||!0,locale:i.dataset.counterLocale||document.documentElement.lang||"undefined",notation:{notation:i.dataset.counterNotation?.toLowerCase()||"standard",useGrouping:!0}};async function d(p){try{if(p.toLowerCase()==="default")return 125;const E=await At.getCounter(p);return window.agera=window.agera??{},window.agera.counterValues=window.agera.counterValues??{},window.agera.counterValues[p]=E.count,E.count}catch(E){return console.error(`Error getting counter value for ${p}:`,E),0}}const u=await d(l);if(i.classList.contains("counter-current-value"))o(i,u,c),a(i,u,c);else{const p=i.querySelectorAll(".counter-current-value");for(const E of p)o(E,u,c),a(E,u,c)}const f=r(u,c),h=i.querySelectorAll(".counter-target-value");for(const p of h)o(p,f,c),a(p,u,c);const v=i.querySelectorAll(".counterbar-limiter");for(const p of v)n(p,u,f);a(i,u,c)}return{processCounterElement:s}}function Ct(){const t=".counter-target-value, .counter-current-value, .counter_container { opacity: 0; transition: opacity 0.7s; }",e=document.createElement("style");e.textContent=t,document.head.appendChild(e)}async function Lt(){const t=document.querySelectorAll("[data-counter-name]"),e=vt();for(const r of t)await e.processCounterElement(r)}function x(t){return JSON.parse(localStorage.getItem(t)??"{}")}function Ut(){const t="data-clear-localstorage",e=document.querySelector(`[${t}]`);if(!e)return;const r=e.getAttribute(t),n=e.matches("a, button"),o=()=>{r?.toLowerCase()==="true"||r?.toLowerCase()==="all"?(console.log("Clearing all local storage"),localStorage.clear()):r&&(console.log("Clearing local storage key:",r),localStorage.removeItem(r))};n?e.addEventListener("click",a=>{a.preventDefault(),o(),document.querySelectorAll("form").forEach(s=>{s.reset(),s.querySelectorAll("input").forEach(i=>{i.value="",i.type==="hidden"&&i.remove()})}),window.location.reload()}):o()}function Rt(){e();function e(){try{const s=localStorage.getItem("forwardedform");if(!s)return;const i=JSON.parse(s);if(!i._timestamp)return;const l=parseInt(i._timestamp,10),c=Date.now(),d=1*60*60*1e3;c-l>d&&localStorage.removeItem("forwardedform")}catch(s){console.error("Error cleaning up expired form data:",s)}}function r(s){const i=x("forwardedform");X(Object.entries(i));function l(u){const f=Array.from(new URLSearchParams(window.location.search),([h,v])=>`${h}: ${v}`).join(", ");return u.utm=f,u}const c=l(i);function d(u){Object.entries(u).forEach(([f,h])=>{if(h){if(f==="_timestamp")return;const v=document.createTextNode(h).textContent,p=`<input type="hidden" id="${f}" name="${f}" value="${v}">`;s.insertAdjacentHTML("afterbegin",p)}})}d(c)}function n(s){const i=new URLSearchParams(window.location.search),l=Array.from(i,([u,f])=>`${u}: ${f}`),c=s.getAttribute("redirect");if(c){const u=c+(c?.includes("?")?"&":"?")+i.toString();s.setAttribute("redirect",u),s.setAttribute("data-redirect",u)}window.addEventListener("beforeunload",()=>{d(s)});function d(u){if(u instanceof HTMLFormElement){const f=new FormData(u),h=l.join(", ");f.set("utm",h),f.set("_timestamp",Date.now().toString()),localStorage.setItem("forwardedform",JSON.stringify(Object.fromEntries(f)))}}}const o=document.querySelectorAll("[data-crm]");o.length>0&&o.forEach(function(s){n(s)});const a=document.querySelectorAll('[data-load-petition="true"]');a.length>0&&a.forEach(function(s){r(s)})}function Pt(){const t=document.querySelector("form[data-auto-submit]");if(t&&t.getAttribute("data-auto-submit")?.toLowerCase()==="true"){if(!t.checkValidity()){console.warn("Form validation failed.");return}const e=new Event("submit",{bubbles:!0,cancelable:!0});t.dispatchEvent(e)}}function xt(){document.querySelectorAll("[data-copy]").forEach(e=>{e.addEventListener("mouseover",function(){e.style.cursor="pointer"}),e.addEventListener("click",async function(){let r="";const n=e.getAttribute("data-copy");if(n?.toLowerCase()==="url")r=window.location.href;else if(n?.toLowerCase()==="prev-url")r=document.referrer||"";else{const o=document.getElementById(n);o?.textContent?r=o.textContent:r=n||""}try{await navigator.clipboard.writeText(r),console.log("Copied to clipboard:",r.toString())}catch(o){console.error("Failed to copy: ",o)}})})}async function Dt(){const t=document.querySelectorAll("[data-js-version]");if(t.length<1)return;const e=document.querySelector('script[src$="agera.js"]');let r="";if(e){const{src:n}=e,o=/@([^/]+)/.exec(n);if(o){const[,a]=o;r=a,r.toLowerCase().includes("latest")&&(r=await Et())}}r!==""&&t.forEach(n=>{n.innerText=r})}function Tt(){document.querySelectorAll("[data-hide-if-data], [data-show-if-data]").forEach(t=>{const e=t.getAttribute("data-hide-if-data")??t.getAttribute("data-show-if-data");if(!e)return;const r=!!t.getAttribute("data-hide-if-data"),n=e?new URLSearchParams(window.location.search).get(e)??"":"",o=e&&x("forwardedform")[e]||"",a=!!(n||o);t.style.display=r===a?"none":"",t.style.display=="none"&&t.getAttribute("name")&&t.setAttribute("name",t.getAttribute("name")+"-hidden"),r&&t.tagName==="INPUT"&&t.required&&(t.required=!1)})}function k(t,e){try{const r=new URL(t,document.baseURI),n=new URL(r.toString()),o=n.searchParams;return e.forEach((a,s)=>{o.has(s)||o.set(s,a)}),n.toString()}catch(r){return console.error("Error updating URL with UTM params:",r),t}}function Ot(){const t=new URLSearchParams(window.location.search);document.querySelectorAll("[data-redirect]").forEach(r=>{const n=r.getAttribute("data-redirect");if(n){const o=k(n,t);r.setAttribute("data-redirect",o)}})}function jt(){const t=document.querySelectorAll("a[href]"),e=new URLSearchParams(window.location.search);t.forEach(r=>{if(!r.href.includes("#"))try{const n=k(r.href,e);r.href=n}catch{console.warn("Invalid URL",r.href)}})}function It(){const t=document.querySelectorAll("[data-insert-localstorage]");let e={};try{const r=localStorage.getItem("forwardedform");if(r){const n=JSON.parse(r);n&&typeof n=="object"&&(e=n)}}catch(r){console.error("Error parsing localStorage data:",r);return}Object.keys(e).length!==0&&t.forEach(r=>{const n=r.getAttribute("data-insert-localstorage");if(n&&n in e){const o=e[n];o!=null&&(r instanceof HTMLInputElement||r instanceof HTMLSelectElement||r instanceof HTMLTextAreaElement?r.value=o.toString():r.textContent=o.toString())}})}const M="data-insert-name";function _t(t,e){let r="";const n=["first_name","first-name","firstname","fn","first","fname","f-name","n","given_name","given-name","givenname","gn","g-n","given"];[...Object.entries(t),...Array.from(e.entries())].forEach(([a,s])=>{n.includes(a.toLowerCase())&&(r=s)});const o=document.querySelectorAll(`[${M}]`);o.length>0&&r!==""&&Ft(o,r)}function Ft(t,e){const r={"no-space":e,"leading-space":"&nbsp;"+e,"trailing-space":e+"&nbsp;","double-space":"&nbsp;"+e+"&nbsp;","":"&nbsp;"+e};t.forEach(n=>{const o=n.getAttribute(M)||"leading-space";r.hasOwnProperty(o)&&(n.innerHTML=r[o])})}function qt(){const t=x("forwardedform"),e=new URLSearchParams(window.location.search);_t(t,e)}const D=typeof Buffer=="function",N=typeof TextDecoder=="function"?new TextDecoder:void 0;typeof TextEncoder=="function"&&new TextEncoder;const kt=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),R=(t=>{let e={};return t.forEach((r,n)=>e[r]=n),e})(kt),Mt=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,A=String.fromCharCode.bind(String),H=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):t=>new Uint8Array(Array.prototype.slice.call(t,0)),B=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),$t=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Nt=t=>{switch(t.length){case 4:var e=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),r=e-65536;return A((r>>>10)+55296)+A((r&1023)+56320);case 3:return A((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return A((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},Ht=t=>t.replace($t,Nt),V=typeof atob=="function"?t=>atob(B(t)):D?t=>Buffer.from(t,"base64").toString("binary"):t=>{if(t=t.replace(/\s+/g,""),!Mt.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(t.length&3));let e,r="",n,o;for(let a=0;a<t.length;)e=R[t.charAt(a++)]<<18|R[t.charAt(a++)]<<12|(n=R[t.charAt(a++)])<<6|(o=R[t.charAt(a++)]),r+=n===64?A(e>>16&255):o===64?A(e>>16&255,e>>8&255):A(e>>16&255,e>>8&255,e&255);return r},Bt=D?t=>H(Buffer.from(t,"base64")):t=>H(V(t).split("").map(e=>e.charCodeAt(0))),Vt=D?t=>Buffer.from(t,"base64").toString("utf8"):N?t=>N.decode(Bt(t)):t=>Ht(V(t)),Jt=t=>B(t.replace(/[-_]/g,e=>e=="-"?"+":"/")),Wt=t=>Vt(Jt(t));function zt(){document.querySelectorAll("[data-insert-query]").forEach(e=>{const r=e.getAttribute("data-insert-query");if(r){const n=new URLSearchParams(window.location.search).get(r);n!==null&&(e instanceof HTMLInputElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement?e.value=n.toString():e.textContent=n.toString())}})}function Gt(){document.querySelectorAll("[data-insert-b64-query]").forEach(e=>{const r=e.getAttribute("data-insert-b64-query");if(r){const n=Wt(new URLSearchParams(window.location.search).get(r)??"");n&&(e instanceof HTMLInputElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement?e.value=n.toString():e.textContent=n.toString())}})}const T={DK:/^\d{4}$/,FI:/^(FI-|AX-)?\d{5}$/,NO:/^\d{4}$/,SE:/^(SE-)?\d{3}[ ]?\d{2}$/};function Zt(){async function t(n){const o=`${g.postalCodeUrl}${n}.js`;return(!T.hasOwnProperty(n)||!o)&&console.error("Unsupported country code"),(await import(o))[n]}async function e(n){if(!(n.getAttribute("data-postalcode-place-autofill")?.toLowerCase()==="true"))return;const a=n.querySelectorAll('[name="postal-code"]'),s=n.querySelectorAll('[name="address-level2"]'),i=n.dataset.countryCode?.toUpperCase()??"",l=Array.from(a).find(d=>d.type!=="hidden"&&d.offsetParent!==null)??a[0],c=Array.from(s).find(d=>d.type!=="hidden"&&d.offsetParent!==null)??s[0];if(!c||!l||i===""||!T.hasOwnProperty(i)){console.error("Visible postal code input, visible city output, or supported country not found");return}try{const d=await t(i),u=!1;l.addEventListener("input",()=>{const f=l.value.replaceAll(" ",""),h=T[i];f.length>3&&h.test(f)&&!u&&(c.value=d[f]||c.value)})}catch(d){console.error("Error loading postal codes:",d)}}async function r(){const n=document.querySelectorAll("[data-postalcode-place-autofill]");for(const o of n)await e(o)}r().catch(n=>{console.error("Postcode Place Autofill Error:",n)})}function Kt(){Object.entries({"[data-share-whatsapp-text]":e=>`https://wa.me/?text=${encodeURIComponent(e)}`,"[data-share-facebook-url]":e=>`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(e)}`,"[data-share-linkedin-url]":e=>`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(e)}`,"[data-share-twitter-text]":e=>`https://twitter.com/intent/tweet?text=${encodeURIComponent(e)}`,"[data-share-email-subject], [data-share-email-body]":(e,r)=>`mailto:?subject=${encodeURIComponent(e)}&body=${encodeURIComponent(r)}`}).forEach(([e,r])=>{document.querySelectorAll(e).forEach(n=>{n.addEventListener("click",o=>{o.preventDefault();const a=e.includes("email"),s=n.getAttribute(a?"data-share-email-subject":e.slice(1,-1))??"",i=a?n.getAttribute("data-share-email-body")??"":"",l=r(s,i);window.open(l,a?"_self":"_blank")})})})}function Xt(){const t=document.querySelectorAll("*"),e=[],r={};let n="",o=!0;t.forEach(s=>{const{attributes:i}=s,l={};Array.from(i).forEach(c=>{l[c.name]=c.value}),Object.entries(l).forEach(([c,d])=>{if(c.startsWith("data-splitter-url")){e.push(d);const f=`data-splitter-params${c.replace("data-splitter-url","")}`;l[f]&&(r[d]=l[f])}else c==="data-splitter-params"?n=d:(c==="data-splitter-keep-params"||c==="data-splitter-keep-query")&&d==="false"&&(o=!1)})});function a(s,i){if(s)try{new URLSearchParams(s).forEach((c,d)=>{if(i.searchParams.has(d)){const u=i.searchParams.get(d);i.searchParams.set(d,`${u}${c}`)}else i.searchParams.set(d,c)})}catch(l){console.error("Error processing parameter string:",s,l)}}if(e.length)try{const s=e[Math.floor(Math.random()*e.length)],i=window.location,l=new URL(s,i.origin);if(o&&i.search)try{new URLSearchParams(i.search).forEach((d,u)=>{l.searchParams.append(u,d)})}catch(c){console.error("Error processing current URL parameters:",c)}a(n,l),a(r[s],l),window.location.href=l.href}catch(s){console.error("Error in URL splitter:",s)}}function Yt(){const t=[document.documentElement.lang||"en","en"];document.querySelectorAll("[data-insert-time]").forEach(n=>{n.innerText=Qt(n,t)}),document.querySelectorAll("[data-remaining-days-to]").forEach(n=>{n.innerText=te(n,t)})}function Qt(t,e){const r=new Date,n=t.getAttribute("data-insert-time");let o="";if(n?.toLowerCase()==="year")o=r.getFullYear().toString();else if(n?.toLowerCase()==="month")o=(r.getMonth()+1).toString();else if(n?.toLowerCase()==="day")o=r.getDate().toString();else if(n?.toLowerCase()==="date")o=r.toLocaleDateString(e);else if(n?.toLowerCase()==="datetime")o=r.toLocaleString(e);else if(n?.toLowerCase()==="time")o=r.toLocaleTimeString(e);else return"";return o}function te(t,e){const r=new Date,n=t.getAttribute("data-remaining-days-to");try{if(n){const o=new Date(n),a=Math.round((o.getTime()-r.getTime())/(1e3*60*60*24));return new Intl.RelativeTimeFormat(e,{numeric:"auto"}).format(a,"day")}}catch(o){console.error("remainingDays error:",o)}return""}const J={"family-name":{pattern:"^(?=.*\\p{L})[\\p{L}\\p{M}\\s'\\-.,]{1,80}$",autocomplete:"family-name"},"given-name":{pattern:"^(?=.*\\p{L})[\\p{L}\\p{M}\\s'\\-.,]{1,40}$",autocomplete:"given-name"},email:{pattern:"^[^@]+@[^@]+\\.[^@\\s]+(\\.[^@\\s]+)*$",autocomplete:"email"},"work-email":{pattern:"^[^@]+@[^@]+\\.[^@\\s]+(\\.[^@\\s]+)*$"}};function ee(t=Object.keys(J),e={}){const r={...J,...e};t.forEach(n=>{document.querySelectorAll(`input[name="${n}"]`).forEach(a=>{a.getAttribute("data-validate-input")==="false"||a.type==="hidden"||r[n]&&(a.pattern||(a.pattern=r[n].pattern),r[n].autocomplete&&!a.getAttribute("autocomplete")&&a.setAttribute("autocomplete",r[n].autocomplete))})})}function re(){{const t=".cloak {opacity: 0;height: 0;overflow: hidden;margin: 0;padding-top: 0;padding-bottom: 0;}",e=document.createElement("style");e.textContent=t,document.head.appendChild(e)}}function ne(){function t(){const a=window.location.pathname.split("/").filter(i=>i.length===2),s=a.length>0?a[0]:"";return s!==""?"/"+s:s}function e(o){try{return new URL(o),!0}catch{return!1}}function r(o,a){if(o===null)return"";if(e(o)){const s=new URL(o);return s.pathname=a+s.pathname,s.toString()}return a+o}const n=document.querySelectorAll('[data-linguana-redirect="true"]');for(const o of n)o.getAttribute("redirect")&&o.setAttribute("redirect",r(o.getAttribute("redirect"),t())),o.getAttribute("data-redirect")&&o.setAttribute("data-redirect",r(o.getAttribute("data-redirect"),t()))}async function oe(){const t=e=>{try{return e()}catch(r){const n=r instanceof Error?r.message:String(r);console.error(`Error running utility function: ${n}`);return}};await t(()=>Dt()),[()=>jt(),()=>Ut(),()=>xt(),()=>Gt(),()=>qt(),()=>zt(),()=>Ot(),()=>Xt(),()=>Yt(),()=>Kt(),()=>Pt(),()=>Zt(),()=>Tt(),()=>tt(),()=>ee(),()=>It()].forEach(t)}(function(){const e=setInterval(()=>{window.agera&&(window.agera.compareCrmValue=q,clearInterval(e))},50)})();function ae(){Ct(),re();async function t(){ne(),Rt(),await Lt(),bt(),lt(),await oe()}document.addEventListener("DOMContentLoaded",async()=>{try{await t()}catch(e){console.error("Error during DOMContentLoaded:",e)}})}typeof window>"u"||window.agera?.initialized?console.log("AGERA.JS already initialized"):(!window.agera||window.agera.dev==!1)&&(window.agera={dev:!1,initialized:!0},ae())})();
//# sourceMappingURL=index.js.map
